(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"7UCR":function(e,t,c){"use strict";c.r(t),c.d(t,"UserModule",(function(){return ne}));var n=c("pk6O"),r=c("tyNb"),o=c("fXoL");let i=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Gb({type:e,selectors:[["tide-user"]],decls:2,vars:0,consts:[[1,"content-area"]],template:function(e,t){1&e&&(o.Sb(0,"div",0),o.Nb(1,"router-outlet"),o.Rb())},directives:[r.g],styles:[""]}),e})();var l=c("mrSG"),s=c("AytR"),a=c("xP43"),b=c("tk/3"),d=c("XNvx");let u=(()=>{class e{constructor(e,t){this.http=e,this.loginService=t}getUserList(){return Object(l.a)(this,void 0,void 0,(function*(){const e=yield this.http.get(s.a.apiPrefix+a.v,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise(),t=[];for(const c of e)t.push({id:c.id,name:c.name,orgName:c.orgName,role:c.role,email:c.email,phone:c.phone});return t}))}getUserList4Org(e){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.http.get(s.a.apiPrefix+a.v+"/"+e,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise(),c=[];for(const e of t)c.push({id:e.id,name:e.name,orgName:e.orgName,role:e.role,email:e.email,phone:e.phone});return c}))}getOrgList(){return Object(l.a)(this,void 0,void 0,(function*(){const e=yield this.http.get(s.a.apiPrefix+a.e,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise(),t={SITE:"SITE"};for(let c of e)t[c.name]=c.name;return t}))}addUser(e){const t=Object.assign({},e);return this.http.post(s.a.apiPrefix+a.v,t,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise().then(()=>Promise.resolve(),e=>Promise.reject(`HTTP ${e.status}: ${e.error.message}`))}editItemUser(e,t){const c=Object.assign({},t);return this.http.put(s.a.apiPrefix+a.v+"/"+e,c,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise().then(()=>Promise.resolve(),e=>Promise.reject(`HTTP ${e.status}: ${e.error.message}`))}removeItem(e){return Object(l.a)(this,void 0,void 0,(function*(){yield this.http.delete(s.a.apiPrefix+a.v+"/"+e,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise().then(()=>Promise.resolve(),e=>Promise.reject(""+e.message))}))}}return e.\u0275fac=function(t){return new(t||e)(o.Wb(b.a),o.Wb(d.a))},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac}),e})();var p=c("LRne"),m=c("Te2O"),g=c("MKsB"),h=c("sYmb");const f=function(){return{}};function S(e,t){if(1&e){const e=o.Tb();o.Sb(0,"clr-dg-row",7),o.Sb(1,"clr-dg-action-overflow"),o.Sb(2,"button",8),o.ac("click",(function(){o.sc(e);const c=t.$implicit;return o.dc(2).displayDetail(c.id,c.name,c.orgName,c.role,c.email,c.phone)})),o.Bc(3),o.ec(4,"translate"),o.Rb(),o.Sb(5,"button",8),o.ac("click",(function(){o.sc(e);const c=t.$implicit;return o.dc(2).delete(c.id)})),o.Bc(6),o.ec(7,"translate"),o.Rb(),o.Rb(),o.Sb(8,"clr-dg-cell"),o.Sb(9,"div",9),o.Bc(10),o.Rb(),o.Rb(),o.Sb(11,"clr-dg-cell"),o.Sb(12,"div",9),o.Bc(13),o.Rb(),o.Rb(),o.Sb(14,"clr-dg-cell"),o.Sb(15,"div",9),o.Bc(16),o.Rb(),o.Rb(),o.Sb(17,"clr-dg-cell"),o.Sb(18,"div",9),o.Bc(19),o.Rb(),o.Rb(),o.Sb(20,"clr-dg-cell"),o.Sb(21,"div",9),o.Bc(22),o.Rb(),o.Rb(),o.Sb(23,"clr-dg-cell"),o.Sb(24,"div",9),o.Bc(25),o.Rb(),o.Rb(),o.Rb()}if(2&e){const e=t.$implicit,c=o.dc(2);o.jc("clrDgItem",e),o.Ab(3),o.Cc(o.gc(4,9,"HOME.USER.EDIT",o.mc(15,f))),o.Ab(3),o.Cc(o.gc(7,12,"HOME.USER.DELETE",o.mc(16,f))),o.Ab(4),o.Cc(null==e?null:e.id),o.Ab(3),o.Cc(null==e?null:e.name),o.Ab(3),o.Cc(null==e?null:e.orgName),o.Ab(3),o.Cc(c.roleTypes[null==e?null:e.role]),o.Ab(3),o.Cc(null==e?null:e.email),o.Ab(3),o.Cc(null==e?null:e.phone)}}function v(e,t){if(1&e&&(o.Sb(0,"div"),o.Sb(1,"clr-datagrid"),o.Sb(2,"clr-dg-column"),o.Sb(3,"div",5),o.Bc(4,"ID"),o.Rb(),o.Rb(),o.Sb(5,"clr-dg-column"),o.Sb(6,"div",5),o.Bc(7,"User Name"),o.Rb(),o.Rb(),o.Sb(8,"clr-dg-column"),o.Sb(9,"div",5),o.Bc(10,"Orgnization Name"),o.Rb(),o.Rb(),o.Sb(11,"clr-dg-column"),o.Sb(12,"div",5),o.Bc(13,"Role"),o.Rb(),o.Rb(),o.Sb(14,"clr-dg-column"),o.Sb(15,"div",5),o.Bc(16,"Email"),o.Rb(),o.Rb(),o.Sb(17,"clr-dg-column"),o.Sb(18,"div",5),o.Bc(19,"Phone Number"),o.Rb(),o.Rb(),o.zc(20,S,26,17,"clr-dg-row",6),o.Rb(),o.Rb()),2&e){const e=t.ngIf;o.Ab(20),o.jc("clrDgItemsOf",e)}}function O(e,t){if(1&e){const e=o.Tb();o.Sb(0,"tide-user-dialog",10),o.ac("save",(function(){return o.sc(e),o.dc().save()}))("cancel",(function(){return o.sc(e),o.dc().cancel()})),o.Rb()}if(2&e){const e=o.dc();o.jc("opened",e.opened)}}function R(e,t){if(1&e){const e=o.Tb();o.Sb(0,"tide-user-card",11),o.ac("save",(function(){return o.sc(e),o.dc().save()}))("cancel",(function(){return o.sc(e),o.dc().cancel()})),o.Rb()}if(2&e){const e=o.dc();o.jc("opened",e.UpdateOpened)("userid",e.UserId)}}let A=(()=>{class e{constructor(e,t,c){this.userService=e,this.translate=t,this.loginService=c,this.vo={alertType:"",alertText:""},this.list$=Object(p.a)([]),this.opened=!1,this.orgList={},this.UpdateOpened=!1,this.UserId=1,this.roleTypes=c.inSiteAdminView?g.c:g.d}delete(e){return Object(l.a)(this,void 0,void 0,(function*(){yield this.userService.removeItem(e).then(()=>{this.vo.alertText="Successfully delete User with id "+e,this.vo.alertType="success"},e=>{this.vo.alertType="danger",this.vo.alertText=e}).then(()=>{this.resetAlert()}),this.refreshList()}))}resetAlert(e){return Object(l.a)(this,void 0,void 0,(function*(){window.setTimeout(()=>{this.vo.alertText=""},e||m.b)}))}save(){return Object(l.a)(this,void 0,void 0,(function*(){yield this.refreshList()}))}cancel(){this.opened=!1,this.UpdateOpened=!1}ngOnInit(){return Object(l.a)(this,void 0,void 0,(function*(){yield this.refreshList()}))}refreshList(){return Object(l.a)(this,void 0,void 0,(function*(){this.list$=this.loginService.inSiteAdminView()?Object(p.a)(yield this.userService.getUserList()):Object(p.a)(yield this.userService.getUserList4Org(localStorage.getItem("orgName"))),this.refreshInterval=window.setInterval(()=>Object(l.a)(this,void 0,void 0,(function*(){this.list$=this.loginService.inSiteAdminView()?Object(p.a)(yield this.userService.getUserList()):Object(p.a)(yield this.userService.getUserList4Org(localStorage.getItem("orgName")))})),m.d),this.loginService.inSiteAdminView()&&(this.orgList=Object(yield this.userService.getOrgList()))}))}displayDetail(e,t,c,n,r,o){return Object(l.a)(this,void 0,void 0,(function*(){this.UserId=e,this.updateName=t,this.updateOrg=c,this.updateRole=n,this.updateEmail=r,this.updatePhone=o,this.UpdateOpened=!0}))}ngOnDestroy(){window.clearInterval(this.refreshInterval)}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(u),o.Mb(h.e),o.Mb(d.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["tide-user-list"]],decls:8,vars:10,consts:[[1,"btn","btn-primary",3,"click"],["shape","plus"],[4,"ngIf"],[3,"opened","save","cancel",4,"ngIf"],[3,"opened","userid","save","cancel",4,"ngIf"],[1,"key"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[3,"clrDgItem"],[1,"btn","btn-sm","btn-link",3,"click"],[1,"value"],[3,"opened","save","cancel"],[3,"opened","userid","save","cancel"]],template:function(e,t){1&e&&(o.Sb(0,"button",0),o.ac("click",(function(){return t.opened=!0})),o.Nb(1,"clr-icon",1),o.Bc(2),o.ec(3,"translate"),o.Rb(),o.zc(4,v,21,1,"div",2),o.ec(5,"async"),o.zc(6,O,1,1,"tide-user-dialog",3),o.zc(7,R,1,2,"tide-user-card",4)),2&e&&(o.Ab(2),o.Dc(" ",o.gc(3,4,"HOME.USER.ADD_USER",o.mc(9,f)),"\n"),o.Ab(2),o.jc("ngIf",o.fc(5,7,t.list$)),o.Ab(2),o.jc("ngIf",t.opened),o.Ab(1),o.jc("ngIf",t.UpdateOpened))},styles:[""]}),e})();var E=c("3Pt+"),C=c("8MG2"),I=c("ofXK");function M(e,t){if(1&e&&(o.Sb(0,"clr-alert",19),o.Sb(1,"clr-alert-item"),o.Sb(2,"div",20),o.Sb(3,"span"),o.Bc(4),o.Rb(),o.Rb(),o.Rb(),o.Rb()),2&e){const e=o.dc();o.jc("clrAlertClosable",!1),o.Ab(4),o.Cc(e.vo.serverError)}}function y(e,t){1&e&&(o.Sb(0,"clr-input-container"),o.Sb(1,"label",21),o.Bc(2,"Role"),o.Rb(),o.Nb(3,"input",22),o.Rb())}function j(e,t){if(1&e&&(o.Sb(0,"option",26),o.Bc(1),o.Rb()),2&e){const e=t.$implicit,c=o.dc(2);o.jc("ngValue",e),o.Ab(1),o.Dc(" ",c.roleType[e],"")}}const N=function(){return{item:"orgnization"}};function P(e,t){if(1&e&&(o.Sb(0,"clr-select-container"),o.Sb(1,"label",23),o.Bc(2,"Role"),o.Rb(),o.Sb(3,"select",24),o.zc(4,j,2,2,"option",25),o.Rb(),o.Sb(5,"clr-control-error"),o.Bc(6),o.ec(7,"translate"),o.Rb(),o.Rb()),2&e){const e=o.dc();o.Ab(4),o.jc("ngForOf",e.roleTypeList),o.Ab(2),o.Cc(o.gc(7,2,"HOME.RESOURCE.DIALOG.REQUIRED",o.mc(5,N)))}}const B=function(){return{}};function U(e,t){1&e&&(o.Sb(0,"clr-control-error"),o.Bc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Cc(o.gc(2,1,"REGISTER.EMAIL_WRONG_FORMAT",o.mc(4,B))))}function L(e,t){1&e&&(o.Sb(0,"clr-control-error"),o.Bc(1,"Phone Number is not in the correct format"),o.Rb())}function w(e,t){1&e&&(o.Sb(0,"span"),o.Bc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Dc(" ",o.gc(2,1,"HOME.RESOURCE.DIALOG.SAVE",o.mc(4,B))," "))}function D(e,t){1&e&&(o.Sb(0,"span",27),o.Bc(1," Loading... "),o.Rb())}let T=(()=>{class e{constructor(e,t,c,n,r){this.fb=e,this.translate=t,this.userService=c,this.loginService=n,this.userList=r,this.opened=!1,this.save=new o.n,this.cancel=new o.n,this.vo={serverError:"",spinning:!1},this.userUpdateForm=this.fb.group({id:[],name:[r.updateName,E.E.required],orgName:[r.updateOrg],role:[r.updateRole,E.E.required],email:[r.updateEmail,[E.E.required,E.E.email]],phone:[r.updatePhone,[E.E.required,E.E.pattern("[0-9 ]{11}")]]}),this.roleTypeList=Object.keys(g.d),this.roleType=g.d}updateSITE(){return"SITE"===this.userList.updateOrg}ngOnInit(){this.userUpdateForm.get("orgName").disable()}onCancel(){this.close()}onSave(){return Object(l.a)(this,void 0,void 0,(function*(){const{value:e}=this.userUpdateForm,t=this.changeID(e);this.resetModal(),this.vo.spinning=!0,yield this.userService.editItemUser(this.userid,t).then(()=>{this.save.emit(""),this.close(),this.vo.spinning=!1},e=>{this.vo.serverError=e,this.vo.spinning=!1})}))}close(){this.cancel.emit()}resetModal(){this.vo.serverError="",this.vo.spinning=!1}changeID(e){return{name:e.name,role:e.role,email:e.email,phone:e.phone}}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(E.f),o.Mb(h.e),o.Mb(u),o.Mb(d.a),o.Mb(A))},e.\u0275cmp=o.Gb({type:e,selectors:[["tide-user-card"]],inputs:{userid:"userid",opened:"opened"},outputs:{save:"save",cancel:"cancel"},decls:33,vars:21,consts:[[3,"clrModalOpen","clrModalSize","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["clrForm","",3,"formGroup"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","username"],["id","username","type","text","formControlName","name","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],["for","orgName1"],["id","orgName1","type","text","formControlName","orgName","clrInput","",1,"clr-col-12","clr-col-md-8"],[4,"ngIf"],["for","email"],["id","email","type","text","formControlName","email","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],[4,"clrIfError"],["for","phone"],["id","phone","type","text","formControlName","phone","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","spinner spinner-sm",4,"ngIf"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],["for","role1"],["id","role1","type","text","formControlName","role","clrInput","","readonly","readonly",1,"clr-col-12","clr-col-md-8"],["for","role"],["clrSelect","","id","role","formControlName","role",1,"clr-col-12","clr-col-md-8"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"spinner","spinner-sm"]],template:function(e,t){1&e&&(o.Sb(0,"clr-modal",0),o.ac("clrModalOpenChange",(function(e){return t.opened=e})),o.Sb(1,"h3",1),o.Bc(2," Update User Information "),o.Rb(),o.Sb(3,"div",2),o.Sb(4,"form",3),o.zc(5,M,5,2,"clr-alert",4),o.Sb(6,"clr-input-container"),o.Sb(7,"label",5),o.Bc(8,"Username"),o.Rb(),o.Nb(9,"input",6),o.Rb(),o.Sb(10,"clr-input-container"),o.Sb(11,"label",7),o.Bc(12,"Orgnization"),o.Rb(),o.Nb(13,"input",8),o.Rb(),o.zc(14,y,4,0,"clr-input-container",9),o.zc(15,P,8,6,"clr-select-container",9),o.Sb(16,"clr-input-container"),o.Sb(17,"label",10),o.Bc(18,"Email"),o.Rb(),o.Nb(19,"input",11),o.zc(20,U,3,5,"clr-control-error",12),o.Rb(),o.Sb(21,"clr-input-container"),o.Sb(22,"label",13),o.Bc(23,"Phone"),o.Rb(),o.Nb(24,"input",14),o.zc(25,L,2,0,"clr-control-error",12),o.Rb(),o.Rb(),o.Rb(),o.Sb(26,"div",15),o.Sb(27,"button",16),o.ac("click",(function(){return t.onCancel()})),o.Bc(28),o.ec(29,"translate"),o.Rb(),o.Sb(30,"button",17),o.ac("click",(function(){return t.onSave()})),o.zc(31,w,3,5,"span",9),o.zc(32,D,2,0,"span",18),o.Rb(),o.Rb(),o.Rb()),2&e&&(o.jc("clrModalOpen",t.opened)("clrModalSize","lg")("clrModalClosable",!1),o.Ab(4),o.jc("formGroup",t.userUpdateForm),o.Ab(1),o.jc("ngIf",t.vo.serverError),o.Ab(4),o.jc("placeholder","Username"),o.Ab(5),o.jc("ngIf",t.updateSITE()),o.Ab(1),o.jc("ngIf",!t.updateSITE()),o.Ab(4),o.jc("placeholder","Email"),o.Ab(1),o.jc("clrIfError","email"),o.Ab(4),o.jc("placeholder","Phone"),o.Ab(1),o.jc("clrIfError","pattern"),o.Ab(2),o.jc("disabled",t.vo.spinning),o.Ab(1),o.Dc(" ",o.gc(29,17,"HOME.RESOURCE.DIALOG.CANCEL",o.mc(20,B))," "),o.Ab(2),o.jc("disabled",!t.userUpdateForm.valid||t.vo.spinning),o.Ab(1),o.jc("ngIf",!t.vo.spinning),o.Ab(1),o.jc("ngIf",t.vo.spinning))},directives:[C.yb,C.zb,E.G,E.r,C.ib,E.k,I.v,C.sb,C.tb,E.c,E.q,E.i,C.rb,C.ob,C.g,C.h,C.i,C.Ob,E.C,C.Nb,I.u,C.t,E.v,E.F],pipes:[h.d],styles:[".card-block[_ngcontent-%COMP%]{display:flex}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;border-right:2px solid #ccc}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   clr-icon.info-icon[_ngcontent-%COMP%]{padding:.5rem}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{flex:1}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:.66667rem}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:.5rem}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:.458333rem}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   clr-icon[_ngcontent-%COMP%]{color:#48960c}.card-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]{display:flex;flex:2}.card-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .detail-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;justify-content:center;align-items:center}.card-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .detail-container[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.25rem;padding:.5rem 0}.card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;text-overflow:ellipsis}"]}),e})();function k(e,t){if(1&e&&(o.Sb(0,"clr-alert",20),o.Sb(1,"clr-alert-item"),o.Sb(2,"div",21),o.Sb(3,"span"),o.Bc(4),o.Rb(),o.Rb(),o.Rb(),o.Rb()),2&e){const e=o.dc();o.jc("clrAlertClosable",!1),o.Ab(4),o.Cc(e.vo.serverError)}}const z=function(){return{}};function _(e,t){1&e&&(o.Sb(0,"clr-input-container"),o.Sb(1,"label",22),o.Bc(2),o.ec(3,"translate"),o.Rb(),o.Nb(4,"input",23),o.Rb()),2&e&&(o.Ab(2),o.Cc(o.gc(3,1,"HOME.USER.DIALOG.ORGANIZATION",o.mc(4,z))))}function G(e,t){if(1&e&&(o.Sb(0,"option",26),o.Bc(1),o.Rb()),2&e){const e=t.$implicit;o.jc("ngValue",e),o.Ab(1),o.Dc(" ",e,"")}}const x=function(){return{item:"Orgnization"}};function F(e,t){if(1&e&&(o.Sb(0,"clr-select-container"),o.Sb(1,"label",24),o.Bc(2),o.ec(3,"translate"),o.Rb(),o.Sb(4,"select",25),o.zc(5,G,2,2,"option",10),o.Rb(),o.Sb(6,"clr-control-error"),o.Bc(7),o.ec(8,"translate"),o.Rb(),o.Rb()),2&e){const e=o.dc();o.Ab(2),o.Cc(o.gc(3,3,"HOME.USER.DIALOG.ORGANIZATION",o.mc(9,z))),o.Ab(3),o.jc("ngForOf",e.orgNames),o.Ab(2),o.Cc(o.gc(8,6,"HOME.RESOURCE.DIALOG.REQUIRED",o.mc(10,x)))}}function H(e,t){if(1&e&&(o.Sb(0,"option",26),o.Bc(1),o.Rb()),2&e){const e=t.$implicit,c=o.dc();o.jc("ngValue",e),o.Ab(1),o.Dc(" ",c.roleType[e],"")}}function V(e,t){1&e&&(o.Sb(0,"clr-control-error"),o.Bc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Cc(o.gc(2,1,"REGISTER.EMAIL_WRONG_FORMAT",o.mc(4,z))))}function q(e,t){1&e&&(o.Sb(0,"clr-control-error"),o.Bc(1,"Phone Number is not in the correct format"),o.Rb())}function $(e,t){1&e&&(o.Sb(0,"span"),o.Bc(1),o.ec(2,"translate"),o.Rb()),2&e&&(o.Ab(1),o.Dc(" ",o.gc(2,1,"HOME.RESOURCE.DIALOG.SAVE",o.mc(4,z))," "))}function J(e,t){1&e&&(o.Sb(0,"span",27),o.Bc(1," Loading... "),o.Rb())}const K=function(){return{item:"Role"}};let W=(()=>{class e{constructor(e,t,c,n,r){this.fb=e,this.translate=t,this.userService=c,this.userList=n,this.loginService=r,this.opened=!1,this.save=new o.n,this.cancel=new o.n,this.vo={serverError:"",spinning:!1},this.userForm=this.fb.group({name:["",[E.E.required]],orgName:[r.inSiteAdminView()?"":localStorage.getItem("orgName"),[E.E.required]],role:["",[E.E.required]],email:["",[E.E.required,E.E.email]],phone:["",[E.E.required,E.E.pattern("[0-9 ]{11}")]]}),r.inSiteAdminView()&&this.userForm.controls.orgName.valueChanges.subscribe(e=>{"SITE"===e?(this.roleTypeList=["SITE_ADMIN"],this.userForm.patchValue({role:"SITE_ADMIN"})):(this.roleTypeList=Object.keys(g.d),this.userForm.patchValue({role:"ORG_ADMIN"}))}),this.orgmap=n.orgList,this.orgNames=Object.keys(n.orgList),this.roleTypeList=Object.keys(g.d),this.roleType=this.loginService.inSiteAdminView()?g.c:g.d}ngOnInit(){}onCancel(){this.close()}onSave(){return Object(l.a)(this,void 0,void 0,(function*(){const{value:e}=this.userForm;this.resetModal(),this.vo.spinning=!0,yield this.userService.addUser(e).then(()=>{this.save.emit(""),this.close(),this.vo.spinning=!1},e=>{this.vo.serverError=e,this.vo.spinning=!1})}))}close(){this.cancel.emit()}resetModal(){this.vo.serverError="",this.vo.spinning=!1}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(E.f),o.Mb(h.e),o.Mb(u),o.Mb(A),o.Mb(d.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["tide-user-dialog"]],inputs:{opened:"opened"},outputs:{save:"save",cancel:"cancel"},decls:45,vars:64,consts:[[3,"clrModalOpen","clrModalSize","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["clrForm","",3,"formGroup"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","username"],["id","username","type","text","formControlName","name","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],[4,"ngIf"],["for","role"],["clrSelect","","id","role","formControlName","role",1,"clr-col-12","clr-col-md-8"],[3,"ngValue",4,"ngFor","ngForOf"],["for","email"],["id","email","type","text","formControlName","email","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],[4,"clrIfError"],["for","phone"],["id","phone","type","text","formControlName","phone","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","spinner spinner-sm",4,"ngIf"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],["for","orgName1"],["id","orgName1","type","text","formControlName","orgName","clrInput","","readonly","readonly",1,"clr-col-12","clr-col-md-8"],["for","orgName"],["clrSelect","","id","orgName","formControlName","orgName",1,"clr-col-12","clr-col-md-8"],[3,"ngValue"],[1,"spinner","spinner-sm"]],template:function(e,t){1&e&&(o.Sb(0,"clr-modal",0),o.ac("clrModalOpenChange",(function(e){return t.opened=e})),o.Sb(1,"h3",1),o.Bc(2),o.ec(3,"translate"),o.Rb(),o.Sb(4,"div",2),o.Sb(5,"form",3),o.zc(6,k,5,2,"clr-alert",4),o.Sb(7,"clr-input-container"),o.Sb(8,"label",5),o.Bc(9),o.ec(10,"translate"),o.Rb(),o.Nb(11,"input",6),o.ec(12,"translate"),o.Rb(),o.zc(13,_,5,5,"clr-input-container",7),o.zc(14,F,9,11,"clr-select-container",7),o.Sb(15,"clr-select-container"),o.Sb(16,"label",8),o.Bc(17),o.ec(18,"translate"),o.Rb(),o.Sb(19,"select",9),o.zc(20,H,2,2,"option",10),o.Rb(),o.Sb(21,"clr-control-error"),o.Bc(22),o.ec(23,"translate"),o.Rb(),o.Rb(),o.Sb(24,"clr-input-container"),o.Sb(25,"label",11),o.Bc(26),o.ec(27,"translate"),o.Rb(),o.Nb(28,"input",12),o.ec(29,"translate"),o.zc(30,V,3,5,"clr-control-error",13),o.Rb(),o.Sb(31,"clr-input-container"),o.Sb(32,"label",14),o.Bc(33),o.ec(34,"translate"),o.Rb(),o.Nb(35,"input",15),o.ec(36,"translate"),o.zc(37,q,2,0,"clr-control-error",13),o.Rb(),o.Rb(),o.Rb(),o.Sb(38,"div",16),o.Sb(39,"button",17),o.ac("click",(function(){return t.onCancel()})),o.Bc(40),o.ec(41,"translate"),o.Rb(),o.Sb(42,"button",18),o.ac("click",(function(){return t.onSave()})),o.zc(43,$,3,5,"span",7),o.zc(44,J,2,0,"span",19),o.Rb(),o.Rb(),o.Rb()),2&e&&(o.jc("clrModalOpen",t.opened)("clrModalSize","lg")("clrModalClosable",!1),o.Ab(2),o.Dc(" ",o.gc(3,24,"HOME.USER.ADD_USER",o.mc(54,z))," "),o.Ab(3),o.jc("formGroup",t.userForm),o.Ab(1),o.jc("ngIf",t.vo.serverError),o.Ab(3),o.Cc(o.gc(10,27,"HOME.USER.DIALOG.USERNAME",o.mc(55,z))),o.Ab(2),o.jc("placeholder",o.gc(12,30,"HOME.USER.DIALOG.USERNAME",o.mc(56,z))),o.Ab(2),o.jc("ngIf",t.loginService.inOrgAdminView()),o.Ab(1),o.jc("ngIf",t.loginService.inSiteAdminView()),o.Ab(3),o.Cc(o.gc(18,33,"HOME.USER.DIALOG.ROLE",o.mc(57,z))),o.Ab(3),o.jc("ngForOf",t.roleTypeList),o.Ab(2),o.Cc(o.gc(23,36,"HOME.RESOURCE.DIALOG.REQUIRED",o.mc(58,K))),o.Ab(4),o.Cc(o.gc(27,39,"HOME.USER.DIALOG.EMAIL",o.mc(59,z))),o.Ab(2),o.jc("placeholder",o.gc(29,42,"HOME.USER.DIALOG.EMAIL",o.mc(60,z))),o.Ab(2),o.jc("clrIfError","email"),o.Ab(3),o.Cc(o.gc(34,45,"HOME.USER.DIALOG.PHONE",o.mc(61,z))),o.Ab(2),o.jc("placeholder",o.gc(36,48,"HOME.USER.DIALOG.PHONE",o.mc(62,z))),o.Ab(2),o.jc("clrIfError","pattern"),o.Ab(2),o.jc("disabled",t.vo.spinning),o.Ab(1),o.Dc(" ",o.gc(41,51,"HOME.RESOURCE.DIALOG.CANCEL",o.mc(63,z))," "),o.Ab(2),o.jc("disabled",!t.userForm.valid||t.vo.spinning),o.Ab(1),o.jc("ngIf",!t.vo.spinning),o.Ab(1),o.jc("ngIf",t.vo.spinning))},directives:[C.yb,C.zb,E.G,E.r,C.ib,E.k,I.v,C.sb,C.tb,E.c,E.q,E.i,C.rb,C.Ob,E.C,C.Nb,I.u,C.t,C.ob,C.g,C.h,C.i,E.v,E.F],pipes:[h.d],styles:[""]}),e})();const Q=[{path:"",component:i,children:[{path:"",component:A}]}],X=[u];let Z=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[r.f.forChild(Q)],r.f]}),e})();var Y=c("30Bq"),ee=c("Bgc3"),te=c("oBHS"),ce=c("gMiC");let ne=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},providers:[...X],imports:[[n.a,Z]]}),e})();o.uc(A,[I.s,I.t,I.u,I.v,I.C,I.y,I.z,I.A,I.B,I.w,I.x,r.g,r.c,r.e,r.d,r.h,E.G,E.v,E.F,E.c,E.w,E.z,E.a,E.C,E.D,E.y,E.q,E.r,E.B,E.o,E.n,E.x,E.b,E.d,E.t,E.u,E.s,E.h,E.k,E.i,E.l,E.e,C.g,C.h,C.j,C.k,C.i,C.v,C.w,C.x,C.z,C.A,C.B,C.J,C.H,C.K,C.L,C.P,C.Q,C.Tc,C.y,C.I,C.N,C.M,C.O,C.C,C.D,C.E,C.mb,C.G,C.F,C.Uc,C.Vc,C.Wc,C.Xc,C.Yc,C.Zc,C.ad,C.bd,C.cd,C.dd,C.Nc,C.Mc,C.Yb,C.Vb,C.Tb,C.Ub,C.Zb,C.Wb,C.Xb,C.sc,C.tc,C.Mb,C.uc,C.kb,C.yb,C.zb,C.hb,C.vb,C.lb,C.qb,C.pb,C.Sc,C.wb,C.l,C.m,C.tb,C.t,C.u,C.ob,C.ib,C.ub,C.s,C.r,C.o,C.p,C.q,C.X,C.U,C.V,C.W,C.Ab,C.Lc,C.Y,C.n,C.rb,C.sb,C.Cb,C.Db,C.Hb,C.Ib,C.Jb,C.Nb,C.Ob,C.ic,C.jc,C.Kb,C.Lb,C.R,C.T,C.S,C.xb,C.jb,C.Bb,C.Pc,C.Oc,C.ec,C.dc,C.hc,C.gc,C.fc,C.ed,C.fd,C.vc,C.zc,C.wc,C.xc,C.yc,C.cb,C.eb,C.fb,C.db,C.Pb,C.Qb,C.Rb,C.pc,C.rc,C.qc,C.Ac,C.Ec,C.Jc,C.Kc,C.Bc,C.Dc,C.Cc,C.Ic,C.Hc,C.Fc,C.Gc,C.ab,C.gb,C.nb,C.Z,C.bb,C.bc,C.ac,C.cc,C.id,C.jd,C.b,C.e,C.f,C.d,C.c,C.gd,C.hd,C.Sb,C.Gb,C.Eb,C.Qc,C.Rc,C.Fb,C.kc,C.lc,C.mc,C.nc,C.oc,Y.a,h.a,ee.a,i,A,W,T],[I.b,I.J,I.r,I.m,I.G,I.g,I.E,I.H,I.d,I.f,I.k,I.l,I.n,h.d,te.a,ce.a]),o.uc(A,[I.s,I.t,I.u,I.v,I.C,I.y,I.z,I.A,I.B,I.w,I.x,r.g,r.c,r.e,r.d,r.h,E.G,E.v,E.F,E.c,E.w,E.z,E.a,E.C,E.D,E.y,E.q,E.r,E.B,E.o,E.n,E.x,E.b,E.d,E.t,E.u,E.s,E.h,E.k,E.i,E.l,E.e,C.g,C.h,C.j,C.k,C.i,C.v,C.w,C.x,C.z,C.A,C.B,C.J,C.H,C.K,C.L,C.P,C.Q,C.Tc,C.y,C.I,C.N,C.M,C.O,C.C,C.D,C.E,C.mb,C.G,C.F,C.Uc,C.Vc,C.Wc,C.Xc,C.Yc,C.Zc,C.ad,C.bd,C.cd,C.dd,C.Nc,C.Mc,C.Yb,C.Vb,C.Tb,C.Ub,C.Zb,C.Wb,C.Xb,C.sc,C.tc,C.Mb,C.uc,C.kb,C.yb,C.zb,C.hb,C.vb,C.lb,C.qb,C.pb,C.Sc,C.wb,C.l,C.m,C.tb,C.t,C.u,C.ob,C.ib,C.ub,C.s,C.r,C.o,C.p,C.q,C.X,C.U,C.V,C.W,C.Ab,C.Lc,C.Y,C.n,C.rb,C.sb,C.Cb,C.Db,C.Hb,C.Ib,C.Jb,C.Nb,C.Ob,C.ic,C.jc,C.Kb,C.Lb,C.R,C.T,C.S,C.xb,C.jb,C.Bb,C.Pc,C.Oc,C.ec,C.dc,C.hc,C.gc,C.fc,C.ed,C.fd,C.vc,C.zc,C.wc,C.xc,C.yc,C.cb,C.eb,C.fb,C.db,C.Pb,C.Qb,C.Rb,C.pc,C.rc,C.qc,C.Ac,C.Ec,C.Jc,C.Kc,C.Bc,C.Dc,C.Cc,C.Ic,C.Hc,C.Fc,C.Gc,C.ab,C.gb,C.nb,C.Z,C.bb,C.bc,C.ac,C.cc,C.id,C.jd,C.b,C.e,C.f,C.d,C.c,C.gd,C.hd,C.Sb,C.Gb,C.Eb,C.Qc,C.Rc,C.Fb,C.kc,C.lc,C.mc,C.nc,C.oc,Y.a,h.a,ee.a,i,A,W,T],[I.b,I.J,I.r,I.m,I.G,I.g,I.E,I.H,I.d,I.f,I.k,I.l,I.n,h.d,te.a,ce.a])}}]);