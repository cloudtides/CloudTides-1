function _createForOfIteratorHelper(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,c=function(){};return{s:c,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"7UCR":function(e,r,t){"use strict";t.r(r),t.d(r,"UserModule",(function(){return be}));var n,c,o=t("pk6O"),i=t("tyNb"),a=t("fXoL"),l=((n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Gb({type:n,selectors:[["tide-user"]],decls:2,vars:0,consts:[[1,"content-area"]],template:function(e,r){1&e&&(a.Sb(0,"div",0),a.Nb(1,"router-outlet"),a.Rb())},directives:[i.g],styles:[""]}),n),s=t("mrSG"),b=t("AytR"),u=t("xP43"),d=t("tk/3"),p=t("XNvx"),f=((c=function(){function e(r,t){_classCallCheck(this,e),this.http=r,this.loginService=t}return _createClass(e,[{key:"getUserList",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,t,n,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get(b.a.apiPrefix+u.v,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise();case 2:r=e.sent,t=[],n=_createForOfIteratorHelper(r);try{for(n.s();!(c=n.n()).done;)o=c.value,t.push({id:o.id,name:o.name,orgName:o.orgName,role:o.role,email:o.email,phone:o.phone})}catch(i){n.e(i)}finally{n.f()}return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getUserList4Org",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var t,n,c,o,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.http.get(b.a.apiPrefix+u.v+"/"+e,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise();case 2:t=r.sent,n=[],c=_createForOfIteratorHelper(t);try{for(c.s();!(o=c.n()).done;)i=o.value,n.push({id:i.id,name:i.name,orgName:i.orgName,role:i.role,email:i.email,phone:i.phone})}catch(a){c.e(a)}finally{c.f()}return r.abrupt("return",n);case 7:case"end":return r.stop()}}),r,this)})))}},{key:"getOrgList",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,t,n,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get(b.a.apiPrefix+u.e,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise();case 2:r=e.sent,t={SITE:"SITE"},n=_createForOfIteratorHelper(r);try{for(n.s();!(c=n.n()).done;)o=c.value,t[o.name]=o.name}catch(i){n.e(i)}finally{n.f()}return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"addUser",value:function(e){var r=Object.assign({},e);return this.http.post(b.a.apiPrefix+u.v,r,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise().then((function(){return Promise.resolve()}),(function(e){return Promise.reject("HTTP ".concat(e.status,": ").concat(e.error.message))}))}},{key:"editItemUser",value:function(e,r){var t=Object.assign({},r);return this.http.put(b.a.apiPrefix+u.v+"/"+e,t,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise().then((function(){return Promise.resolve()}),(function(e){return Promise.reject("HTTP ".concat(e.status,": ").concat(e.error.message))}))}},{key:"removeItem",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.http.delete(b.a.apiPrefix+u.v+"/"+e,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise().then((function(){return Promise.resolve()}),(function(e){return Promise.reject(""+e.message)}));case 2:case"end":return r.stop()}}),r,this)})))}}]),e}()).\u0275fac=function(e){return new(e||c)(a.Wb(d.a),a.Wb(p.a))},c.\u0275prov=a.Ib({token:c,factory:c.\u0275fac}),c),m=t("LRne"),g=t("Te2O"),h=t("MKsB"),v=t("sYmb"),S=function(){return{}};function R(e,r){if(1&e){var t=a.Tb();a.Sb(0,"clr-dg-row",7),a.Sb(1,"clr-dg-action-overflow"),a.Sb(2,"button",8),a.ac("click",(function(){a.sc(t);var e=r.$implicit;return a.dc(2).displayDetail(e.id,e.name,e.orgName,e.role,e.email,e.phone)})),a.Bc(3),a.ec(4,"translate"),a.Rb(),a.Sb(5,"button",8),a.ac("click",(function(){a.sc(t);var e=r.$implicit;return a.dc(2).delete(e.id)})),a.Bc(6),a.ec(7,"translate"),a.Rb(),a.Rb(),a.Sb(8,"clr-dg-cell"),a.Sb(9,"div",9),a.Bc(10),a.Rb(),a.Rb(),a.Sb(11,"clr-dg-cell"),a.Sb(12,"div",9),a.Bc(13),a.Rb(),a.Rb(),a.Sb(14,"clr-dg-cell"),a.Sb(15,"div",9),a.Bc(16),a.Rb(),a.Rb(),a.Sb(17,"clr-dg-cell"),a.Sb(18,"div",9),a.Bc(19),a.Rb(),a.Rb(),a.Sb(20,"clr-dg-cell"),a.Sb(21,"div",9),a.Bc(22),a.Rb(),a.Rb(),a.Sb(23,"clr-dg-cell"),a.Sb(24,"div",9),a.Bc(25),a.Rb(),a.Rb(),a.Rb()}if(2&e){var n=r.$implicit,c=a.dc(2);a.jc("clrDgItem",n),a.Ab(3),a.Cc(a.gc(4,9,"HOME.USER.EDIT",a.mc(15,S))),a.Ab(3),a.Cc(a.gc(7,12,"HOME.USER.DELETE",a.mc(16,S))),a.Ab(4),a.Cc(null==n?null:n.id),a.Ab(3),a.Cc(null==n?null:n.name),a.Ab(3),a.Cc(null==n?null:n.orgName),a.Ab(3),a.Cc(c.roleTypes[null==n?null:n.role]),a.Ab(3),a.Cc(null==n?null:n.email),a.Ab(3),a.Cc(null==n?null:n.phone)}}function O(e,r){if(1&e&&(a.Sb(0,"div"),a.Sb(1,"clr-datagrid"),a.Sb(2,"clr-dg-column"),a.Sb(3,"div",5),a.Bc(4,"ID"),a.Rb(),a.Rb(),a.Sb(5,"clr-dg-column"),a.Sb(6,"div",5),a.Bc(7,"User Name"),a.Rb(),a.Rb(),a.Sb(8,"clr-dg-column"),a.Sb(9,"div",5),a.Bc(10,"Orgnization Name"),a.Rb(),a.Rb(),a.Sb(11,"clr-dg-column"),a.Sb(12,"div",5),a.Bc(13,"Role"),a.Rb(),a.Rb(),a.Sb(14,"clr-dg-column"),a.Sb(15,"div",5),a.Bc(16,"Email"),a.Rb(),a.Rb(),a.Sb(17,"clr-dg-column"),a.Sb(18,"div",5),a.Bc(19,"Phone Number"),a.Rb(),a.Rb(),a.zc(20,R,26,17,"clr-dg-row",6),a.Rb(),a.Rb()),2&e){var t=r.ngIf;a.Ab(20),a.jc("clrDgItemsOf",t)}}function A(e,r){if(1&e){var t=a.Tb();a.Sb(0,"tide-user-dialog",10),a.ac("save",(function(){return a.sc(t),a.dc().save()}))("cancel",(function(){return a.sc(t),a.dc().cancel()})),a.Rb()}if(2&e){var n=a.dc();a.jc("opened",n.opened)}}function y(e,r){if(1&e){var t=a.Tb();a.Sb(0,"tide-user-card",11),a.ac("save",(function(){return a.sc(t),a.dc().save()}))("cancel",(function(){return a.sc(t),a.dc().cancel()})),a.Rb()}if(2&e){var n=a.dc();a.jc("opened",n.UpdateOpened)("userid",n.UserId)}}var C,E=((C=function(){function e(r,t,n){_classCallCheck(this,e),this.userService=r,this.translate=t,this.loginService=n,this.vo={alertType:"",alertText:""},this.list$=Object(m.a)([]),this.opened=!1,this.orgList={},this.UpdateOpened=!1,this.UserId=1,this.roleTypes=n.inSiteAdminView?h.c:h.d}return _createClass(e,[{key:"delete",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var t=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.userService.removeItem(e).then((function(){t.vo.alertText="Successfully delete User with id "+e,t.vo.alertType="success"}),(function(e){t.vo.alertType="danger",t.vo.alertText=e})).then((function(){t.resetAlert()}));case 2:this.refreshList();case 3:case"end":return r.stop()}}),r,this)})))}},{key:"resetAlert",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var t=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:window.setTimeout((function(){t.vo.alertText=""}),e||g.b);case 1:case"end":return r.stop()}}),r)})))}},{key:"save",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshList();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"cancel",value:function(){this.opened=!1,this.UpdateOpened=!1}},{key:"ngOnInit",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshList();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"refreshList",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loginService.inSiteAdminView()){e.next=8;break}return e.t1=Object(m.a),e.next=4,this.userService.getUserList();case 4:e.t2=e.sent,e.t0=(0,e.t1)(e.t2),e.next=13;break;case 8:return e.t3=Object(m.a),e.next=11,this.userService.getUserList4Org(localStorage.getItem("orgName"));case 11:e.t4=e.sent,e.t0=(0,e.t3)(e.t4);case 13:if(this.list$=e.t0,this.refreshInterval=window.setInterval((function(){return Object(s.a)(r,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loginService.inSiteAdminView()){e.next=8;break}return e.t1=Object(m.a),e.next=4,this.userService.getUserList();case 4:e.t2=e.sent,e.t0=(0,e.t1)(e.t2),e.next=13;break;case 8:return e.t3=Object(m.a),e.next=11,this.userService.getUserList4Org(localStorage.getItem("orgName"));case 11:e.t4=e.sent,e.t0=(0,e.t3)(e.t4);case 13:this.list$=e.t0;case 14:case"end":return e.stop()}}),e,this)})))}),g.d),e.t5=this.loginService.inSiteAdminView(),!e.t5){e.next=22;break}return e.t6=Object,e.next=20,this.userService.getOrgList();case 20:e.t7=e.sent,this.orgList=(0,e.t6)(e.t7);case 22:case"end":return e.stop()}}),e,this)})))}},{key:"displayDetail",value:function(e,r,t,n,c,o){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:this.UserId=e,this.updateName=r,this.updateOrg=t,this.updateRole=n,this.updateEmail=c,this.updatePhone=o,this.UpdateOpened=!0;case 1:case"end":return i.stop()}}),i,this)})))}},{key:"ngOnDestroy",value:function(){window.clearInterval(this.refreshInterval)}}]),e}()).\u0275fac=function(e){return new(e||C)(a.Mb(f),a.Mb(v.e),a.Mb(p.a))},C.\u0275cmp=a.Gb({type:C,selectors:[["tide-user-list"]],decls:8,vars:10,consts:[[1,"btn","btn-primary",3,"click"],["shape","plus"],[4,"ngIf"],[3,"opened","save","cancel",4,"ngIf"],[3,"opened","userid","save","cancel",4,"ngIf"],[1,"key"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[3,"clrDgItem"],[1,"btn","btn-sm","btn-link",3,"click"],[1,"value"],[3,"opened","save","cancel"],[3,"opened","userid","save","cancel"]],template:function(e,r){1&e&&(a.Sb(0,"button",0),a.ac("click",(function(){return r.opened=!0})),a.Nb(1,"clr-icon",1),a.Bc(2),a.ec(3,"translate"),a.Rb(),a.zc(4,O,21,1,"div",2),a.ec(5,"async"),a.zc(6,A,1,1,"tide-user-dialog",3),a.zc(7,y,1,2,"tide-user-card",4)),2&e&&(a.Ab(2),a.Dc(" ",a.gc(3,4,"HOME.USER.ADD_USER",a.mc(9,S)),"\n"),a.Ab(2),a.jc("ngIf",a.fc(5,7,r.list$)),a.Ab(2),a.jc("ngIf",r.opened),a.Ab(1),a.jc("ngIf",r.UpdateOpened))},styles:[""]}),C),I=t("3Pt+"),M=t("8MG2"),k=t("ofXK");function w(e,r){if(1&e&&(a.Sb(0,"clr-alert",19),a.Sb(1,"clr-alert-item"),a.Sb(2,"div",20),a.Sb(3,"span"),a.Bc(4),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e){var t=a.dc();a.jc("clrAlertClosable",!1),a.Ab(4),a.Cc(t.vo.serverError)}}function j(e,r){1&e&&(a.Sb(0,"clr-input-container"),a.Sb(1,"label",21),a.Bc(2,"Role"),a.Rb(),a.Nb(3,"input",22),a.Rb())}function N(e,r){if(1&e&&(a.Sb(0,"option",26),a.Bc(1),a.Rb()),2&e){var t=r.$implicit,n=a.dc(2);a.jc("ngValue",t),a.Ab(1),a.Dc(" ",n.roleType[t],"")}}var P=function(){return{item:"orgnization"}};function x(e,r){if(1&e&&(a.Sb(0,"clr-select-container"),a.Sb(1,"label",23),a.Bc(2,"Role"),a.Rb(),a.Sb(3,"select",24),a.zc(4,N,2,2,"option",25),a.Rb(),a.Sb(5,"clr-control-error"),a.Bc(6),a.ec(7,"translate"),a.Rb(),a.Rb()),2&e){var t=a.dc();a.Ab(4),a.jc("ngForOf",t.roleTypeList),a.Ab(2),a.Cc(a.gc(7,2,"HOME.RESOURCE.DIALOG.REQUIRED",a.mc(5,P)))}}var _=function(){return{}};function B(e,r){1&e&&(a.Sb(0,"clr-control-error"),a.Bc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Cc(a.gc(2,1,"REGISTER.EMAIL_WRONG_FORMAT",a.mc(4,_))))}function U(e,r){1&e&&(a.Sb(0,"clr-control-error"),a.Bc(1,"Phone Number is not in the correct format"),a.Rb())}function L(e,r){1&e&&(a.Sb(0,"span"),a.Bc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Dc(" ",a.gc(2,1,"HOME.RESOURCE.DIALOG.SAVE",a.mc(4,_))," "))}function T(e,r){1&e&&(a.Sb(0,"span",27),a.Bc(1," Loading... "),a.Rb())}var D,z=((D=function(){function e(r,t,n,c,o){_classCallCheck(this,e),this.fb=r,this.translate=t,this.userService=n,this.loginService=c,this.userList=o,this.opened=!1,this.save=new a.n,this.cancel=new a.n,this.vo={serverError:"",spinning:!1},this.userUpdateForm=this.fb.group({id:[],name:[o.updateName,I.E.required],orgName:[o.updateOrg],role:[o.updateRole,I.E.required],email:[o.updateEmail,[I.E.required,I.E.email]],phone:[o.updatePhone,[I.E.required,I.E.pattern("[0-9 ]{11}")]]}),this.roleTypeList=Object.keys(h.d),this.roleType=h.d}return _createClass(e,[{key:"updateSITE",value:function(){return"SITE"===this.userList.updateOrg}},{key:"ngOnInit",value:function(){this.userUpdateForm.get("orgName").disable()}},{key:"onCancel",value:function(){this.close()}},{key:"onSave",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.userUpdateForm.value,t=this.changeID(r),this.resetModal(),this.vo.spinning=!0,e.next=5,this.userService.editItemUser(this.userid,t).then((function(){n.save.emit(""),n.close(),n.vo.spinning=!1}),(function(e){n.vo.serverError=e,n.vo.spinning=!1}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"close",value:function(){this.cancel.emit()}},{key:"resetModal",value:function(){this.vo.serverError="",this.vo.spinning=!1}},{key:"changeID",value:function(e){return{name:e.name,role:e.role,email:e.email,phone:e.phone}}}]),e}()).\u0275fac=function(e){return new(e||D)(a.Mb(I.f),a.Mb(v.e),a.Mb(f),a.Mb(p.a),a.Mb(E))},D.\u0275cmp=a.Gb({type:D,selectors:[["tide-user-card"]],inputs:{userid:"userid",opened:"opened"},outputs:{save:"save",cancel:"cancel"},decls:33,vars:21,consts:[[3,"clrModalOpen","clrModalSize","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["clrForm","",3,"formGroup"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","username"],["id","username","type","text","formControlName","name","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],["for","orgName1"],["id","orgName1","type","text","formControlName","orgName","clrInput","",1,"clr-col-12","clr-col-md-8"],[4,"ngIf"],["for","email"],["id","email","type","text","formControlName","email","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],[4,"clrIfError"],["for","phone"],["id","phone","type","text","formControlName","phone","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","spinner spinner-sm",4,"ngIf"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],["for","role1"],["id","role1","type","text","formControlName","role","clrInput","","readonly","readonly",1,"clr-col-12","clr-col-md-8"],["for","role"],["clrSelect","","id","role","formControlName","role",1,"clr-col-12","clr-col-md-8"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"spinner","spinner-sm"]],template:function(e,r){1&e&&(a.Sb(0,"clr-modal",0),a.ac("clrModalOpenChange",(function(e){return r.opened=e})),a.Sb(1,"h3",1),a.Bc(2," Update User Information "),a.Rb(),a.Sb(3,"div",2),a.Sb(4,"form",3),a.zc(5,w,5,2,"clr-alert",4),a.Sb(6,"clr-input-container"),a.Sb(7,"label",5),a.Bc(8,"Username"),a.Rb(),a.Nb(9,"input",6),a.Rb(),a.Sb(10,"clr-input-container"),a.Sb(11,"label",7),a.Bc(12,"Orgnization"),a.Rb(),a.Nb(13,"input",8),a.Rb(),a.zc(14,j,4,0,"clr-input-container",9),a.zc(15,x,8,6,"clr-select-container",9),a.Sb(16,"clr-input-container"),a.Sb(17,"label",10),a.Bc(18,"Email"),a.Rb(),a.Nb(19,"input",11),a.zc(20,B,3,5,"clr-control-error",12),a.Rb(),a.Sb(21,"clr-input-container"),a.Sb(22,"label",13),a.Bc(23,"Phone"),a.Rb(),a.Nb(24,"input",14),a.zc(25,U,2,0,"clr-control-error",12),a.Rb(),a.Rb(),a.Rb(),a.Sb(26,"div",15),a.Sb(27,"button",16),a.ac("click",(function(){return r.onCancel()})),a.Bc(28),a.ec(29,"translate"),a.Rb(),a.Sb(30,"button",17),a.ac("click",(function(){return r.onSave()})),a.zc(31,L,3,5,"span",9),a.zc(32,T,2,0,"span",18),a.Rb(),a.Rb(),a.Rb()),2&e&&(a.jc("clrModalOpen",r.opened)("clrModalSize","lg")("clrModalClosable",!1),a.Ab(4),a.jc("formGroup",r.userUpdateForm),a.Ab(1),a.jc("ngIf",r.vo.serverError),a.Ab(4),a.jc("placeholder","Username"),a.Ab(5),a.jc("ngIf",r.updateSITE()),a.Ab(1),a.jc("ngIf",!r.updateSITE()),a.Ab(4),a.jc("placeholder","Email"),a.Ab(1),a.jc("clrIfError","email"),a.Ab(4),a.jc("placeholder","Phone"),a.Ab(1),a.jc("clrIfError","pattern"),a.Ab(2),a.jc("disabled",r.vo.spinning),a.Ab(1),a.Dc(" ",a.gc(29,17,"HOME.RESOURCE.DIALOG.CANCEL",a.mc(20,_))," "),a.Ab(2),a.jc("disabled",!r.userUpdateForm.valid||r.vo.spinning),a.Ab(1),a.jc("ngIf",!r.vo.spinning),a.Ab(1),a.jc("ngIf",r.vo.spinning))},directives:[M.yb,M.zb,I.G,I.r,M.ib,I.k,k.v,M.sb,M.tb,I.c,I.q,I.i,M.rb,M.ob,M.g,M.h,M.i,M.Ob,I.C,M.Nb,k.u,M.t,I.v,I.F],pipes:[v.d],styles:[".card-block[_ngcontent-%COMP%]{display:flex}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;border-right:2px solid #ccc}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   clr-icon.info-icon[_ngcontent-%COMP%]{padding:.5rem}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{flex:1}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:.66667rem}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:.5rem}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:.458333rem}.card-block[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   clr-icon[_ngcontent-%COMP%]{color:#48960c}.card-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]{display:flex;flex:2}.card-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .detail-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;justify-content:center;align-items:center}.card-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .detail-container[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.25rem;padding:.5rem 0}.card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;text-overflow:ellipsis}"]}),D);function G(e,r){if(1&e&&(a.Sb(0,"clr-alert",20),a.Sb(1,"clr-alert-item"),a.Sb(2,"div",21),a.Sb(3,"span"),a.Bc(4),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e){var t=a.dc();a.jc("clrAlertClosable",!1),a.Ab(4),a.Cc(t.vo.serverError)}}var F=function(){return{}};function H(e,r){1&e&&(a.Sb(0,"clr-input-container"),a.Sb(1,"label",22),a.Bc(2),a.ec(3,"translate"),a.Rb(),a.Nb(4,"input",23),a.Rb()),2&e&&(a.Ab(2),a.Cc(a.gc(3,1,"HOME.USER.DIALOG.ORGANIZATION",a.mc(4,F))))}function V(e,r){if(1&e&&(a.Sb(0,"option",26),a.Bc(1),a.Rb()),2&e){var t=r.$implicit;a.jc("ngValue",t),a.Ab(1),a.Dc(" ",t,"")}}var q=function(){return{item:"Orgnization"}};function J(e,r){if(1&e&&(a.Sb(0,"clr-select-container"),a.Sb(1,"label",24),a.Bc(2),a.ec(3,"translate"),a.Rb(),a.Sb(4,"select",25),a.zc(5,V,2,2,"option",10),a.Rb(),a.Sb(6,"clr-control-error"),a.Bc(7),a.ec(8,"translate"),a.Rb(),a.Rb()),2&e){var t=a.dc();a.Ab(2),a.Cc(a.gc(3,3,"HOME.USER.DIALOG.ORGANIZATION",a.mc(9,F))),a.Ab(3),a.jc("ngForOf",t.orgNames),a.Ab(2),a.Cc(a.gc(8,6,"HOME.RESOURCE.DIALOG.REQUIRED",a.mc(10,q)))}}function $(e,r){if(1&e&&(a.Sb(0,"option",26),a.Bc(1),a.Rb()),2&e){var t=r.$implicit,n=a.dc();a.jc("ngValue",t),a.Ab(1),a.Dc(" ",n.roleType[t],"")}}function K(e,r){1&e&&(a.Sb(0,"clr-control-error"),a.Bc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Cc(a.gc(2,1,"REGISTER.EMAIL_WRONG_FORMAT",a.mc(4,F))))}function W(e,r){1&e&&(a.Sb(0,"clr-control-error"),a.Bc(1,"Phone Number is not in the correct format"),a.Rb())}function Q(e,r){1&e&&(a.Sb(0,"span"),a.Bc(1),a.ec(2,"translate"),a.Rb()),2&e&&(a.Ab(1),a.Dc(" ",a.gc(2,1,"HOME.RESOURCE.DIALOG.SAVE",a.mc(4,F))," "))}function X(e,r){1&e&&(a.Sb(0,"span",27),a.Bc(1," Loading... "),a.Rb())}var Z,Y,ee,re=function(){return{item:"Role"}},te=((Z=function(){function e(r,t,n,c,o){var i=this;_classCallCheck(this,e),this.fb=r,this.translate=t,this.userService=n,this.userList=c,this.loginService=o,this.opened=!1,this.save=new a.n,this.cancel=new a.n,this.vo={serverError:"",spinning:!1},this.userForm=this.fb.group({name:["",[I.E.required]],orgName:[o.inSiteAdminView()?"":localStorage.getItem("orgName"),[I.E.required]],role:["",[I.E.required]],email:["",[I.E.required,I.E.email]],phone:["",[I.E.required,I.E.pattern("[0-9 ]{11}")]]}),o.inSiteAdminView()&&this.userForm.controls.orgName.valueChanges.subscribe((function(e){"SITE"===e?(i.roleTypeList=["SITE_ADMIN"],i.userForm.patchValue({role:"SITE_ADMIN"})):(i.roleTypeList=Object.keys(h.d),i.userForm.patchValue({role:"ORG_ADMIN"}))})),this.orgmap=c.orgList,this.orgNames=Object.keys(c.orgList),this.roleTypeList=Object.keys(h.d),this.roleType=this.loginService.inSiteAdminView()?h.c:h.d}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onCancel",value:function(){this.close()}},{key:"onSave",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.userForm.value,this.resetModal(),this.vo.spinning=!0,e.next=5,this.userService.addUser(r).then((function(){t.save.emit(""),t.close(),t.vo.spinning=!1}),(function(e){t.vo.serverError=e,t.vo.spinning=!1}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"close",value:function(){this.cancel.emit()}},{key:"resetModal",value:function(){this.vo.serverError="",this.vo.spinning=!1}}]),e}()).\u0275fac=function(e){return new(e||Z)(a.Mb(I.f),a.Mb(v.e),a.Mb(f),a.Mb(E),a.Mb(p.a))},Z.\u0275cmp=a.Gb({type:Z,selectors:[["tide-user-dialog"]],inputs:{opened:"opened"},outputs:{save:"save",cancel:"cancel"},decls:45,vars:64,consts:[[3,"clrModalOpen","clrModalSize","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["clrForm","",3,"formGroup"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","username"],["id","username","type","text","formControlName","name","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],[4,"ngIf"],["for","role"],["clrSelect","","id","role","formControlName","role",1,"clr-col-12","clr-col-md-8"],[3,"ngValue",4,"ngFor","ngForOf"],["for","email"],["id","email","type","text","formControlName","email","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],[4,"clrIfError"],["for","phone"],["id","phone","type","text","formControlName","phone","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","spinner spinner-sm",4,"ngIf"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],["for","orgName1"],["id","orgName1","type","text","formControlName","orgName","clrInput","","readonly","readonly",1,"clr-col-12","clr-col-md-8"],["for","orgName"],["clrSelect","","id","orgName","formControlName","orgName",1,"clr-col-12","clr-col-md-8"],[3,"ngValue"],[1,"spinner","spinner-sm"]],template:function(e,r){1&e&&(a.Sb(0,"clr-modal",0),a.ac("clrModalOpenChange",(function(e){return r.opened=e})),a.Sb(1,"h3",1),a.Bc(2),a.ec(3,"translate"),a.Rb(),a.Sb(4,"div",2),a.Sb(5,"form",3),a.zc(6,G,5,2,"clr-alert",4),a.Sb(7,"clr-input-container"),a.Sb(8,"label",5),a.Bc(9),a.ec(10,"translate"),a.Rb(),a.Nb(11,"input",6),a.ec(12,"translate"),a.Rb(),a.zc(13,H,5,5,"clr-input-container",7),a.zc(14,J,9,11,"clr-select-container",7),a.Sb(15,"clr-select-container"),a.Sb(16,"label",8),a.Bc(17),a.ec(18,"translate"),a.Rb(),a.Sb(19,"select",9),a.zc(20,$,2,2,"option",10),a.Rb(),a.Sb(21,"clr-control-error"),a.Bc(22),a.ec(23,"translate"),a.Rb(),a.Rb(),a.Sb(24,"clr-input-container"),a.Sb(25,"label",11),a.Bc(26),a.ec(27,"translate"),a.Rb(),a.Nb(28,"input",12),a.ec(29,"translate"),a.zc(30,K,3,5,"clr-control-error",13),a.Rb(),a.Sb(31,"clr-input-container"),a.Sb(32,"label",14),a.Bc(33),a.ec(34,"translate"),a.Rb(),a.Nb(35,"input",15),a.ec(36,"translate"),a.zc(37,W,2,0,"clr-control-error",13),a.Rb(),a.Rb(),a.Rb(),a.Sb(38,"div",16),a.Sb(39,"button",17),a.ac("click",(function(){return r.onCancel()})),a.Bc(40),a.ec(41,"translate"),a.Rb(),a.Sb(42,"button",18),a.ac("click",(function(){return r.onSave()})),a.zc(43,Q,3,5,"span",7),a.zc(44,X,2,0,"span",19),a.Rb(),a.Rb(),a.Rb()),2&e&&(a.jc("clrModalOpen",r.opened)("clrModalSize","lg")("clrModalClosable",!1),a.Ab(2),a.Dc(" ",a.gc(3,24,"HOME.USER.ADD_USER",a.mc(54,F))," "),a.Ab(3),a.jc("formGroup",r.userForm),a.Ab(1),a.jc("ngIf",r.vo.serverError),a.Ab(3),a.Cc(a.gc(10,27,"HOME.USER.DIALOG.USERNAME",a.mc(55,F))),a.Ab(2),a.jc("placeholder",a.gc(12,30,"HOME.USER.DIALOG.USERNAME",a.mc(56,F))),a.Ab(2),a.jc("ngIf",r.loginService.inOrgAdminView()),a.Ab(1),a.jc("ngIf",r.loginService.inSiteAdminView()),a.Ab(3),a.Cc(a.gc(18,33,"HOME.USER.DIALOG.ROLE",a.mc(57,F))),a.Ab(3),a.jc("ngForOf",r.roleTypeList),a.Ab(2),a.Cc(a.gc(23,36,"HOME.RESOURCE.DIALOG.REQUIRED",a.mc(58,re))),a.Ab(4),a.Cc(a.gc(27,39,"HOME.USER.DIALOG.EMAIL",a.mc(59,F))),a.Ab(2),a.jc("placeholder",a.gc(29,42,"HOME.USER.DIALOG.EMAIL",a.mc(60,F))),a.Ab(2),a.jc("clrIfError","email"),a.Ab(3),a.Cc(a.gc(34,45,"HOME.USER.DIALOG.PHONE",a.mc(61,F))),a.Ab(2),a.jc("placeholder",a.gc(36,48,"HOME.USER.DIALOG.PHONE",a.mc(62,F))),a.Ab(2),a.jc("clrIfError","pattern"),a.Ab(2),a.jc("disabled",r.vo.spinning),a.Ab(1),a.Dc(" ",a.gc(41,51,"HOME.RESOURCE.DIALOG.CANCEL",a.mc(63,F))," "),a.Ab(2),a.jc("disabled",!r.userForm.valid||r.vo.spinning),a.Ab(1),a.jc("ngIf",!r.vo.spinning),a.Ab(1),a.jc("ngIf",r.vo.spinning))},directives:[M.yb,M.zb,I.G,I.r,M.ib,I.k,k.v,M.sb,M.tb,I.c,I.q,I.i,M.rb,M.Ob,I.C,M.Nb,k.u,M.t,M.ob,M.g,M.h,M.i,I.v,I.F],pipes:[v.d],styles:[""]}),Z),ne=[{path:"",component:l,children:[{path:"",component:E}]}],ce=[f],oe=((Y=function e(){_classCallCheck(this,e)}).\u0275mod=a.Kb({type:Y}),Y.\u0275inj=a.Jb({factory:function(e){return new(e||Y)},imports:[[i.f.forChild(ne)],i.f]}),Y),ie=t("30Bq"),ae=t("Bgc3"),le=t("oBHS"),se=t("gMiC"),be=((ee=function e(){_classCallCheck(this,e)}).\u0275mod=a.Kb({type:ee}),ee.\u0275inj=a.Jb({factory:function(e){return new(e||ee)},providers:[].concat(ce),imports:[[o.a,oe]]}),ee);a.uc(E,[k.s,k.t,k.u,k.v,k.C,k.y,k.z,k.A,k.B,k.w,k.x,i.g,i.c,i.e,i.d,i.h,I.G,I.v,I.F,I.c,I.w,I.z,I.a,I.C,I.D,I.y,I.q,I.r,I.B,I.o,I.n,I.x,I.b,I.d,I.t,I.u,I.s,I.h,I.k,I.i,I.l,I.e,M.g,M.h,M.j,M.k,M.i,M.v,M.w,M.x,M.z,M.A,M.B,M.J,M.H,M.K,M.L,M.P,M.Q,M.Tc,M.y,M.I,M.N,M.M,M.O,M.C,M.D,M.E,M.mb,M.G,M.F,M.Uc,M.Vc,M.Wc,M.Xc,M.Yc,M.Zc,M.ad,M.bd,M.cd,M.dd,M.Nc,M.Mc,M.Yb,M.Vb,M.Tb,M.Ub,M.Zb,M.Wb,M.Xb,M.sc,M.tc,M.Mb,M.uc,M.kb,M.yb,M.zb,M.hb,M.vb,M.lb,M.qb,M.pb,M.Sc,M.wb,M.l,M.m,M.tb,M.t,M.u,M.ob,M.ib,M.ub,M.s,M.r,M.o,M.p,M.q,M.X,M.U,M.V,M.W,M.Ab,M.Lc,M.Y,M.n,M.rb,M.sb,M.Cb,M.Db,M.Hb,M.Ib,M.Jb,M.Nb,M.Ob,M.ic,M.jc,M.Kb,M.Lb,M.R,M.T,M.S,M.xb,M.jb,M.Bb,M.Pc,M.Oc,M.ec,M.dc,M.hc,M.gc,M.fc,M.ed,M.fd,M.vc,M.zc,M.wc,M.xc,M.yc,M.cb,M.eb,M.fb,M.db,M.Pb,M.Qb,M.Rb,M.pc,M.rc,M.qc,M.Ac,M.Ec,M.Jc,M.Kc,M.Bc,M.Dc,M.Cc,M.Ic,M.Hc,M.Fc,M.Gc,M.ab,M.gb,M.nb,M.Z,M.bb,M.bc,M.ac,M.cc,M.id,M.jd,M.b,M.e,M.f,M.d,M.c,M.gd,M.hd,M.Sb,M.Gb,M.Eb,M.Qc,M.Rc,M.Fb,M.kc,M.lc,M.mc,M.nc,M.oc,ie.a,v.a,ae.a,l,E,te,z],[k.b,k.J,k.r,k.m,k.G,k.g,k.E,k.H,k.d,k.f,k.k,k.l,k.n,v.d,le.a,se.a]),a.uc(E,[k.s,k.t,k.u,k.v,k.C,k.y,k.z,k.A,k.B,k.w,k.x,i.g,i.c,i.e,i.d,i.h,I.G,I.v,I.F,I.c,I.w,I.z,I.a,I.C,I.D,I.y,I.q,I.r,I.B,I.o,I.n,I.x,I.b,I.d,I.t,I.u,I.s,I.h,I.k,I.i,I.l,I.e,M.g,M.h,M.j,M.k,M.i,M.v,M.w,M.x,M.z,M.A,M.B,M.J,M.H,M.K,M.L,M.P,M.Q,M.Tc,M.y,M.I,M.N,M.M,M.O,M.C,M.D,M.E,M.mb,M.G,M.F,M.Uc,M.Vc,M.Wc,M.Xc,M.Yc,M.Zc,M.ad,M.bd,M.cd,M.dd,M.Nc,M.Mc,M.Yb,M.Vb,M.Tb,M.Ub,M.Zb,M.Wb,M.Xb,M.sc,M.tc,M.Mb,M.uc,M.kb,M.yb,M.zb,M.hb,M.vb,M.lb,M.qb,M.pb,M.Sc,M.wb,M.l,M.m,M.tb,M.t,M.u,M.ob,M.ib,M.ub,M.s,M.r,M.o,M.p,M.q,M.X,M.U,M.V,M.W,M.Ab,M.Lc,M.Y,M.n,M.rb,M.sb,M.Cb,M.Db,M.Hb,M.Ib,M.Jb,M.Nb,M.Ob,M.ic,M.jc,M.Kb,M.Lb,M.R,M.T,M.S,M.xb,M.jb,M.Bb,M.Pc,M.Oc,M.ec,M.dc,M.hc,M.gc,M.fc,M.ed,M.fd,M.vc,M.zc,M.wc,M.xc,M.yc,M.cb,M.eb,M.fb,M.db,M.Pb,M.Qb,M.Rb,M.pc,M.rc,M.qc,M.Ac,M.Ec,M.Jc,M.Kc,M.Bc,M.Dc,M.Cc,M.Ic,M.Hc,M.Fc,M.Gc,M.ab,M.gb,M.nb,M.Z,M.bb,M.bc,M.ac,M.cc,M.id,M.jd,M.b,M.e,M.f,M.d,M.c,M.gd,M.hd,M.Sb,M.Gb,M.Eb,M.Qc,M.Rc,M.Fb,M.kc,M.lc,M.mc,M.nc,M.oc,ie.a,v.a,ae.a,l,E,te,z],[k.b,k.J,k.r,k.m,k.G,k.g,k.E,k.H,k.d,k.f,k.k,k.l,k.n,v.d,le.a,se.a])}}]);