(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{fo52:function(e,t,c){"use strict";c.r(t),c.d(t,"TemplateModule",(function(){return ne}));var i=c("pk6O"),n=c("tyNb"),r=c("fXoL");let l=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Gb({type:e,selectors:[["tide-template"]],decls:2,vars:0,consts:[[1,"content-area"]],template:function(e,t){1&e&&(r.Sb(0,"div",0),r.Nb(1,"router-outlet"),r.Rb())},directives:[n.g],styles:[""]}),e})();var o=c("mrSG"),s=c("lJxs"),a=c("AytR"),b=c("xP43"),d=c("tk/3"),p=c("XNvx");let u=(()=>{class e{constructor(e,t){this.http=e,this.loginService=t,this.prefix=a.a.apiPrefix+"/template"}getList(){return Object(o.a)(this,void 0,void 0,(function*(){const e=yield this.http.get(a.a.apiPrefix+b.t,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise(),t=[];for(const c of e)t.push({id:c.id,name:c.name,dateAdded:c.dateAdded,description:c.description,tag:c.tag});return t}))}getResList(){return Object(o.a)(this,void 0,void 0,(function*(){const e=yield this.http.get(a.a.apiPrefix+b.z,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise(),t={};for(let c of e)t[c.datacenter]=c.id;return t}))}getVMList(e){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.http.get(a.a.apiPrefix+b.t+"/"+b.s+"/"+e,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise(),c=[];for(const e of t)c.push({id:e.id,name:e.name,vcpu:e.vcpu,vmem:e.vmem,disk:e.disk,ports:e.ports});return c}))}getTemplateList(){return Object(o.a)(this,void 0,void 0,(function*(){const e=yield this.http.get(a.a.apiPrefix+b.t,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise(),t={};for(let c of e)t[c.name]=c.id;return t}))}addItem(e){const t=Object.assign({},e);return this.http.post(a.a.apiPrefix+b.t,t,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise().then(()=>Promise.resolve(),e=>Promise.reject(`HTTP ${e.status}: ${e.error.message}`))}addItemVM(e){const t=Object.assign({},e);return this.http.post(a.a.apiPrefix+b.r,t,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise().then(()=>Promise.resolve(),e=>Promise.reject(`HTTP ${e.status}: ${e.error.message}`))}editItemVM(e){const t=Object.assign({},e);return this.http.put(a.a.apiPrefix+b.r,t,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise().then(()=>Promise.resolve(),e=>Promise.reject(`HTTP ${e.status}: ${e.error.message}`))}editItem(e,t){return this.http.put(`${this.prefix}/${e}`,t).pipe(Object(s.a)(m))}removeItem(e){return Object(o.a)(this,void 0,void 0,(function*(){yield this.http.delete(a.a.apiPrefix+b.t+"/"+e,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise().then(()=>Promise.resolve(),e=>Promise.reject(""+e.message))}))}removeItemVM(e){return Object(o.a)(this,void 0,void 0,(function*(){yield this.http.delete(a.a.apiPrefix+b.r+"/"+e,{headers:{Authorization:"Bearer "+this.loginService.token}}).toPromise().then(()=>Promise.resolve(),e=>Promise.reject(""+e.message))}))}}return e.\u0275fac=function(t){return new(t||e)(r.Wb(d.a),r.Wb(p.a))},e.\u0275prov=r.Ib({token:e,factory:e.\u0275fac}),e})();function m(e){return e}var h=c("LRne"),v=c("Te2O"),f=c("sYmb");const g=function(){return{}};function S(e,t){if(1&e){const e=r.Tb();r.Sb(0,"clr-dg-row",7),r.Sb(1,"clr-dg-action-overflow"),r.Sb(2,"button",8),r.ac("click",(function(){r.sc(e);const c=t.$implicit;return r.dc(2).delete(null==c?null:c.id)})),r.Bc(3),r.ec(4,"translate"),r.Rb(),r.Sb(5,"button",8),r.ac("click",(function(){r.sc(e);const c=t.$implicit;return r.dc(2).add(null==c?null:c.id)})),r.Bc(6,"ADD VM TEMPLATE"),r.Rb(),r.Sb(7,"button",8),r.ac("click",(function(){r.sc(e);const c=t.$implicit;return r.dc(2).displayVM(null==c?null:c.id)})),r.Bc(8,"DISPLAY VM TEMPLATE"),r.Rb(),r.Sb(9,"button",8),r.ac("click",(function(){r.sc(e);const c=t.$implicit;return r.dc(2).publish(null==c?null:c.id)})),r.Bc(10,"Publish"),r.Rb(),r.Rb(),r.Sb(11,"clr-dg-cell"),r.Sb(12,"div",9),r.Bc(13),r.Rb(),r.Rb(),r.Sb(14,"clr-dg-cell"),r.Sb(15,"div",9),r.Bc(16),r.Rb(),r.Rb(),r.Sb(17,"clr-dg-cell"),r.Sb(18,"div",9),r.Bc(19),r.Rb(),r.Rb(),r.Sb(20,"clr-dg-cell"),r.Sb(21,"div",9),r.Bc(22),r.Rb(),r.Rb(),r.Sb(23,"clr-dg-cell"),r.Sb(24,"div",9),r.Bc(25),r.Rb(),r.Rb(),r.Rb()}if(2&e){const e=t.$implicit;r.jc("clrDgItem",e),r.Ab(3),r.Cc(r.gc(4,7,"HOME.RESOURCE.CARD.FOOTER.DELETE",r.mc(10,g))),r.Ab(10),r.Cc(null==e?null:e.id),r.Ab(3),r.Cc(null==e?null:e.name),r.Ab(3),r.Cc(null==e?null:e.description),r.Ab(3),r.Cc(null==e?null:e.tag),r.Ab(3),r.Cc(null==e?null:e.dateAdded)}}function R(e,t){if(1&e&&(r.Sb(0,"div"),r.Sb(1,"clr-datagrid"),r.Sb(2,"clr-dg-column"),r.Sb(3,"div",5),r.Bc(4,"ID"),r.Rb(),r.Rb(),r.Sb(5,"clr-dg-column"),r.Sb(6,"div",5),r.Bc(7,"Template Name"),r.Rb(),r.Rb(),r.Sb(8,"clr-dg-column"),r.Sb(9,"div",5),r.Bc(10,"Description"),r.Rb(),r.Rb(),r.Sb(11,"clr-dg-column"),r.Sb(12,"div",5),r.Bc(13,"Tag"),r.Rb(),r.Rb(),r.Sb(14,"clr-dg-column"),r.Sb(15,"div",5),r.Bc(16,"Create Time"),r.Rb(),r.Rb(),r.zc(17,S,26,11,"clr-dg-row",6),r.Rb(),r.Rb()),2&e){const e=t.ngIf;r.Ab(17),r.jc("clrDgItemsOf",e)}}function A(e,t){if(1&e){const e=r.Tb();r.Sb(0,"tide-template-dialog",10),r.ac("save",(function(){return r.sc(e),r.dc().save()}))("cancel",(function(){return r.sc(e),r.dc().cancel()})),r.Rb()}if(2&e){const e=r.dc();r.jc("opened",e.opened)}}function O(e,t){if(1&e){const e=r.Tb();r.Sb(0,"tide-template-dialogvm",11),r.ac("save",(function(){return r.sc(e),r.dc().save()}))("cancel",(function(){return r.sc(e),r.dc().cancel()})),r.Rb()}if(2&e){const e=r.dc();r.jc("opened",e.VMopened)("templateid",e.TemplateID)}}function M(e,t){if(1&e){const e=r.Tb();r.Sb(0,"tide-vm-card",11),r.ac("save",(function(){return r.sc(e),r.dc().save()}))("cancel",(function(){return r.sc(e),r.dc().cancel()})),r.Rb()}if(2&e){const e=r.dc();r.jc("opened",e.displayOpened)("templateid",e.TemplateID)}}let y=(()=>{class e{constructor(e,t,c){this.templateService=e,this.translate=t,this.loginService=c,this.vo={alertType:"",alertText:""},this.list$=Object(h.a)([]),this.VMlist$=Object(h.a)([]),this.TemplateList={},this.opened=!1,this.VMopened=!1,this.displayOpened=!1,this.TemplateID=1}resetAlert(e){return Object(o.a)(this,void 0,void 0,(function*(){window.setTimeout(()=>{this.vo.alertText=""},e||v.b)}))}save(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.refreshList()}))}open(){this.opened=!0}cancel(){this.opened=!1,this.VMopened=!1,this.displayOpened=!1}ngOnInit(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.refreshList()}))}refreshList(){return Object(o.a)(this,void 0,void 0,(function*(){this.list$=Object(h.a)(yield this.templateService.getList()),this.refreshInterval=window.setInterval(()=>Object(o.a)(this,void 0,void 0,(function*(){this.list$=Object(h.a)(yield this.templateService.getList())})),v.e),this.TemplateList=Object(yield this.templateService.getTemplateList())}))}ngOnDestroy(){window.clearInterval(this.refreshInterval)}add(e){return Object(o.a)(this,void 0,void 0,(function*(){this.TemplateID=e,this.VMopened=!0}))}publish(e){return Object(o.a)(this,void 0,void 0,(function*(){}))}displayVM(e){return Object(o.a)(this,void 0,void 0,(function*(){this.TemplateID=e,this.displayOpened=!0,this.VMlist$=Object(h.a)(yield this.templateService.getVMList(e))}))}delete(e){return Object(o.a)(this,void 0,void 0,(function*(){yield this.templateService.removeItem(e).then(()=>{this.vo.alertText="Successfully delete vendor with id "+e,this.vo.alertType="success"},e=>{this.vo.alertType="danger",this.vo.alertText=e}).then(()=>{this.resetAlert()}),this.refreshList()}))}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(u),r.Mb(f.e),r.Mb(p.a))},e.\u0275cmp=r.Gb({type:e,selectors:[["tide-template-list"]],decls:9,vars:11,consts:[[1,"btn","btn-primary",3,"click"],["shape","plus"],[4,"ngIf"],[3,"opened","save","cancel",4,"ngIf"],[3,"opened","templateid","save","cancel",4,"ngIf"],[1,"key"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[3,"clrDgItem"],[1,"btn","btn-sm","btn-link",3,"click"],[1,"value"],[3,"opened","save","cancel"],[3,"opened","templateid","save","cancel"]],template:function(e,t){1&e&&(r.Sb(0,"button",0),r.ac("click",(function(){return t.opened=!0})),r.Nb(1,"clr-icon",1),r.Bc(2),r.ec(3,"translate"),r.Rb(),r.zc(4,R,18,1,"div",2),r.ec(5,"async"),r.zc(6,A,1,1,"tide-template-dialog",3),r.zc(7,O,1,2,"tide-template-dialogvm",4),r.zc(8,M,1,2,"tide-vm-card",4)),2&e&&(r.Ab(2),r.Dc(" ",r.gc(3,5,"HOME.TEMPLATE.ADD_TEMPLATE",r.mc(10,g)),"\n"),r.Ab(2),r.jc("ngIf",r.fc(5,8,t.list$)),r.Ab(2),r.jc("ngIf",t.opened),r.Ab(1),r.jc("ngIf",t.VMopened),r.Ab(1),r.jc("ngIf",t.displayOpened))},styles:[""]}),e})();var I=c("3Pt+"),C=c("8MG2"),j=c("ofXK");function E(e,t){if(1&e&&(r.Sb(0,"clr-alert",21),r.Sb(1,"clr-alert-item"),r.Sb(2,"div",22),r.Sb(3,"span"),r.Bc(4),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&e){const e=r.dc();r.jc("clrAlertClosable",!1),r.Ab(4),r.Cc(e.vo.serverError)}}function B(e,t){if(1&e&&(r.Sb(0,"option",23),r.Bc(1),r.Rb()),2&e){const e=t.$implicit;r.jc("ngValue",e),r.Ab(1),r.Dc(" ",e,"")}}function T(e,t){if(1&e&&(r.Sb(0,"option",23),r.Bc(1),r.Rb()),2&e){const e=t.$implicit;r.jc("ngValue",e),r.Ab(1),r.Dc(" ",e,"")}}const k=function(){return{}};function D(e,t){1&e&&(r.Sb(0,"span"),r.Bc(1),r.ec(2,"translate"),r.Rb()),2&e&&(r.Ab(1),r.Dc(" ",r.gc(2,1,"HOME.RESOURCE.DIALOG.SAVE",r.mc(4,k))," "))}function L(e,t){1&e&&(r.Sb(0,"span",24),r.Bc(1," Loading... "),r.Rb())}const P=function(){return{item:"name"}};let z=(()=>{class e{constructor(e,t,c,i){this.fb=e,this.translate=t,this.templateService=c,this.templateList=i,this.opened=!1,this.save=new r.n,this.cancel=new r.n,this.resourceList=["Big Data","Machine Learning","Research","Cloud Native"],this.typeList=["OVA","Others"],this.vo={serverError:"",spinning:!1},this.templateForm=this.fb.group({type:["",I.E.required],name:["",I.E.required],tag:["",I.E.required],description:["",I.E.required],path:["",I.E.required]})}ngOnInit(){}onCancel(){this.close()}onSave(){return Object(o.a)(this,void 0,void 0,(function*(){const{value:e}=this.templateForm;this.resetModal(),this.vo.spinning=!0,yield this.templateService.addItem(e).then(()=>{this.save.emit(""),this.close(),this.vo.spinning=!1},e=>{this.vo.serverError=e,this.vo.spinning=!1})}))}close(){this.cancel.emit()}resetModal(){this.vo.serverError="",this.vo.spinning=!1}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(I.f),r.Mb(f.e),r.Mb(u),r.Mb(y))},e.\u0275cmp=r.Gb({type:e,selectors:[["tide-template-dialog"]],inputs:{opened:"opened"},outputs:{save:"save",cancel:"cancel"},decls:41,vars:29,consts:[[3,"clrModalOpen","clrModalSize","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["clrForm","",3,"formGroup"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","type"],["clrSelect","","id","type","formControlName","type",1,"clr-col-12","clr-col-md-8"],[3,"ngValue",4,"ngFor","ngForOf"],["for","name"],["id","name","type","text","formControlName","name","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],["for","description"],["id","description","type","text","formControlName","description","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],["for","tag"],["clrSelect","","id","tag","formControlName","tag",1,"clr-col-12","clr-col-md-8"],["for","path"],["id","path","type","string","formControlName","path","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],["class","spinner spinner-sm",4,"ngIf"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],[3,"ngValue"],[1,"spinner","spinner-sm"]],template:function(e,t){1&e&&(r.Sb(0,"clr-modal",0),r.ac("clrModalOpenChange",(function(e){return t.opened=e})),r.Sb(1,"h3",1),r.Bc(2," Add Template "),r.Rb(),r.Sb(3,"div",2),r.Sb(4,"form",3),r.zc(5,E,5,2,"clr-alert",4),r.Sb(6,"clr-select-container"),r.Sb(7,"label",5),r.Bc(8,"Type"),r.Rb(),r.Sb(9,"select",6),r.zc(10,B,2,2,"option",7),r.Rb(),r.Sb(11,"clr-control-error"),r.Bc(12),r.ec(13,"translate"),r.Rb(),r.Rb(),r.Sb(14,"clr-input-container"),r.Sb(15,"label",8),r.Bc(16,"Name"),r.Rb(),r.Nb(17,"input",9),r.Rb(),r.Sb(18,"clr-input-container"),r.Sb(19,"label",10),r.Bc(20,"Description"),r.Rb(),r.Nb(21,"input",11),r.Rb(),r.Sb(22,"clr-select-container"),r.Sb(23,"label",12),r.Bc(24,"Tag"),r.Rb(),r.Sb(25,"select",13),r.zc(26,T,2,2,"option",7),r.Rb(),r.Sb(27,"clr-control-error"),r.Bc(28),r.ec(29,"translate"),r.Rb(),r.Rb(),r.Sb(30,"clr-input-container"),r.Sb(31,"label",14),r.Bc(32,"Path To File"),r.Rb(),r.Nb(33,"input",15),r.Rb(),r.Rb(),r.Rb(),r.Sb(34,"div",16),r.Sb(35,"button",17),r.ac("click",(function(){return t.onCancel()})),r.Bc(36),r.ec(37,"translate"),r.Rb(),r.Sb(38,"button",18),r.ac("click",(function(){return t.onSave()})),r.zc(39,D,3,5,"span",19),r.zc(40,L,2,0,"span",20),r.Rb(),r.Rb(),r.Rb()),2&e&&(r.jc("clrModalOpen",t.opened)("clrModalSize","lg")("clrModalClosable",!1),r.Ab(4),r.jc("formGroup",t.templateForm),r.Ab(1),r.jc("ngIf",t.vo.serverError),r.Ab(5),r.jc("ngForOf",t.typeList),r.Ab(2),r.Cc(r.gc(13,17,"HOME.RESOURCE.DIALOG.REQUIRED",r.mc(26,P))),r.Ab(5),r.jc("placeholder","Template Name"),r.Ab(4),r.jc("placeholder","Description"),r.Ab(5),r.jc("ngForOf",t.resourceList),r.Ab(2),r.Cc(r.gc(29,20,"HOME.RESOURCE.DIALOG.REQUIRED",r.mc(27,P))),r.Ab(5),r.jc("placeholder","Path to the uploading file"),r.Ab(2),r.jc("disabled",t.vo.spinning),r.Ab(1),r.Dc(" ",r.gc(37,23,"HOME.RESOURCE.DIALOG.CANCEL",r.mc(28,k))," "),r.Ab(2),r.jc("disabled",!t.templateForm.valid||t.vo.spinning),r.Ab(1),r.jc("ngIf",!t.vo.spinning),r.Ab(1),r.jc("ngIf",t.vo.spinning))},directives:[C.yb,C.zb,I.G,I.r,C.ib,I.k,j.v,C.Ob,C.tb,I.C,C.Nb,I.q,I.i,j.u,C.t,C.sb,I.c,C.rb,C.g,C.h,C.i,I.v,I.F],pipes:[f.d],styles:[""]}),e})();function w(e,t){if(1&e&&(r.Sb(0,"clr-alert",20),r.Sb(1,"clr-alert-item"),r.Sb(2,"div",21),r.Sb(3,"span"),r.Bc(4),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&e){const e=r.dc();r.jc("clrAlertClosable",!1),r.Ab(4),r.Cc(e.vo.serverError)}}const N=function(){return{}};function x(e,t){1&e&&(r.Sb(0,"span"),r.Bc(1),r.ec(2,"translate"),r.Rb()),2&e&&(r.Ab(1),r.Dc(" ",r.gc(2,1,"HOME.RESOURCE.DIALOG.SAVE",r.mc(4,N))," "))}function V(e,t){1&e&&(r.Sb(0,"span",22),r.Bc(1," Loading... "),r.Rb())}let G=(()=>{class e{constructor(e,t,c,i){this.fb=e,this.translate=t,this.templateService=c,this.templateList=i,this.opened=!1,this.templateid=1,this.save=new r.n,this.cancel=new r.n,this.vo={serverError:"",spinning:!1},this.tempList=Object.keys(i.TemplateList),this.template=i.TemplateList,this.templateForm=this.fb.group({name:["",I.E.required],disk:["",I.E.required],vmem:["",I.E.required],vcpu:["",I.E.required],ports:[""]})}ngOnInit(){}onCancel(){this.close()}onSave(){return Object(o.a)(this,void 0,void 0,(function*(){const{value:e}=this.templateForm,t=this.addTemplateID(e);this.resetModal(),this.vo.spinning=!0,yield this.templateService.addItemVM(t).then(()=>{this.save.emit(""),this.close(),this.vo.spinning=!1},e=>{this.vo.serverError=e,this.vo.spinning=!1})}))}close(){this.cancel.emit()}resetModal(){this.vo.serverError="",this.vo.spinning=!1}addTemplateID(e){return{name:e.name,disk:e.disk,vmem:e.vmem,vcpu:e.vcpu,templateID:this.templateList.TemplateID,ports:e.ports}}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(I.f),r.Mb(f.e),r.Mb(u),r.Mb(y))},e.\u0275cmp=r.Gb({type:e,selectors:[["tide-template-dialogvm"]],inputs:{opened:"opened",templateid:"templateid"},outputs:{save:"save",cancel:"cancel"},decls:33,vars:19,consts:[[3,"clrModalOpen","clrModalSize","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["clrForm","",3,"formGroup"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","name"],["id","name","type","text","formControlName","name","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],["for","disk"],["id","disk","type","number","formControlName","disk","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],["for","vmem"],["id","vmem","type","number","formControlName","vmem","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],["for","vcpu"],["id","vcpu","type","number","formControlName","vcpu","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],["for","ports"],["id","ports","type","text","formControlName","ports","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],["class","spinner spinner-sm",4,"ngIf"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],[1,"spinner","spinner-sm"]],template:function(e,t){1&e&&(r.Sb(0,"clr-modal",0),r.ac("clrModalOpenChange",(function(e){return t.opened=e})),r.Sb(1,"h3",1),r.Bc(2," Add VM Template "),r.Rb(),r.Sb(3,"div",2),r.Sb(4,"form",3),r.zc(5,w,5,2,"clr-alert",4),r.Sb(6,"clr-input-container"),r.Sb(7,"label",5),r.Bc(8,"Name"),r.Rb(),r.Nb(9,"input",6),r.Rb(),r.Sb(10,"clr-input-container"),r.Sb(11,"label",7),r.Bc(12,"Disk Space"),r.Rb(),r.Nb(13,"input",8),r.Rb(),r.Sb(14,"clr-input-container"),r.Sb(15,"label",9),r.Bc(16,"Memory Size"),r.Rb(),r.Nb(17,"input",10),r.Rb(),r.Sb(18,"clr-input-container"),r.Sb(19,"label",11),r.Bc(20,"vCPU Number"),r.Rb(),r.Nb(21,"input",12),r.Rb(),r.Sb(22,"clr-input-container"),r.Sb(23,"label",13),r.Bc(24,"Exposed Ports"),r.Rb(),r.Nb(25,"input",14),r.Rb(),r.Rb(),r.Rb(),r.Sb(26,"div",15),r.Sb(27,"button",16),r.ac("click",(function(){return t.onCancel()})),r.Bc(28),r.ec(29,"translate"),r.Rb(),r.Sb(30,"button",17),r.ac("click",(function(){return t.onSave()})),r.zc(31,x,3,5,"span",18),r.zc(32,V,2,0,"span",19),r.Rb(),r.Rb(),r.Rb()),2&e&&(r.jc("clrModalOpen",t.opened)("clrModalSize","lg")("clrModalClosable",!1),r.Ab(4),r.jc("formGroup",t.templateForm),r.Ab(1),r.jc("ngIf",t.vo.serverError),r.Ab(4),r.jc("placeholder","VM Name"),r.Ab(4),r.jc("placeholder","Disk Space Size (GB)"),r.Ab(4),r.jc("placeholder","Memory Size (GB)"),r.Ab(4),r.jc("placeholder","vCPU Number"),r.Ab(4),r.jc("placeholder","Exposed Ports, use , to seperate ports without space"),r.Ab(2),r.jc("disabled",t.vo.spinning),r.Ab(1),r.Dc(" ",r.gc(29,15,"HOME.RESOURCE.DIALOG.CANCEL",r.mc(18,N))," "),r.Ab(2),r.jc("disabled",!t.templateForm.valid||t.vo.spinning),r.Ab(1),r.jc("ngIf",!t.vo.spinning),r.Ab(1),r.jc("ngIf",t.vo.spinning))},directives:[C.yb,C.zb,I.G,I.r,C.ib,I.k,j.v,C.sb,C.tb,I.c,I.q,I.i,C.rb,I.w,C.g,C.h,C.i],pipes:[f.d],styles:[""]}),e})();const F=function(){return{}};function U(e,t){if(1&e){const e=r.Tb();r.Sb(0,"clr-dg-row",9),r.Sb(1,"clr-dg-action-overflow"),r.Sb(2,"button",10),r.ac("click",(function(){r.sc(e);const c=t.$implicit;return r.dc(2).Click(null==c?null:c.id,null==c?null:c.vcpu,null==c?null:c.vmem,null==c?null:c.disk)})),r.Bc(3,"Update VM"),r.Rb(),r.Sb(4,"button",10),r.ac("click",(function(){r.sc(e);const c=t.$implicit;return r.dc(2).delete(null==c?null:c.id)})),r.Bc(5),r.ec(6,"translate"),r.Rb(),r.Rb(),r.Sb(7,"clr-dg-cell"),r.Sb(8,"div",11),r.Bc(9),r.Rb(),r.Rb(),r.Sb(10,"clr-dg-cell"),r.Sb(11,"div",11),r.Bc(12),r.Rb(),r.Rb(),r.Sb(13,"clr-dg-cell"),r.Sb(14,"div",11),r.Bc(15),r.Rb(),r.Rb(),r.Sb(16,"clr-dg-cell"),r.Sb(17,"div",11),r.Bc(18),r.Rb(),r.Rb(),r.Sb(19,"clr-dg-cell"),r.Sb(20,"div",11),r.Bc(21),r.Rb(),r.Rb(),r.Rb()}if(2&e){const e=t.$implicit;r.jc("clrDgItem",e),r.Ab(5),r.Cc(r.gc(6,7,"HOME.RESOURCE.CARD.FOOTER.DELETE",r.mc(10,F))),r.Ab(4),r.Cc(null==e?null:e.name),r.Ab(3),r.Dc("",null==e?null:e.vmem," GB"),r.Ab(3),r.Dc("",null==e?null:e.disk," GB"),r.Ab(3),r.Cc(null==e?null:e.vcpu),r.Ab(3),r.Cc(null==e?null:e.ports)}}function $(e,t){if(1&e&&(r.Sb(0,"div"),r.Sb(1,"clr-datagrid"),r.Sb(2,"clr-dg-column"),r.Sb(3,"div",7),r.Bc(4,"VM Name"),r.Rb(),r.Rb(),r.Sb(5,"clr-dg-column"),r.Sb(6,"div",7),r.Bc(7,"Memory Size"),r.Rb(),r.Rb(),r.Sb(8,"clr-dg-column"),r.Sb(9,"div",7),r.Bc(10,"Storage Size"),r.Rb(),r.Rb(),r.Sb(11,"clr-dg-column"),r.Sb(12,"div",7),r.Bc(13,"CPUs"),r.Rb(),r.Rb(),r.Sb(14,"clr-dg-column"),r.Sb(15,"div",7),r.Bc(16,"Exposed Ports"),r.Rb(),r.Rb(),r.zc(17,U,22,11,"clr-dg-row",8),r.Rb(),r.Rb()),2&e){const e=t.ngIf;r.Ab(17),r.jc("clrDgItemsOf",e)}}function q(e,t){if(1&e){const e=r.Tb();r.Sb(0,"tide-template-dialogupdate",12),r.ac("save",(function(){return r.sc(e),r.dc().Save()}))("cancel",(function(){return r.sc(e),r.dc().Cancel()})),r.Rb()}if(2&e){const e=r.dc();r.jc("opened",e.dialogOpened)("vmid",e.updateId)}}let H=(()=>{class e{constructor(e,t,c,i){this.fb=e,this.translate=t,this.templateService=c,this.TemplateList=i,this.vo={alertType:"",alertText:""},this.opened=!1,this.templateid=1,this.save=new r.n,this.cancel=new r.n,this.list$=Object(h.a)([]),this.dialogOpened=!1,this.updateId=1,this.updateCPU=1,this.updateMem=1,this.updateDisk=1}resetAlert(e){return Object(o.a)(this,void 0,void 0,(function*(){window.setTimeout(()=>{this.vo.alertText=""},e||v.b)}))}refreshList(){return Object(o.a)(this,void 0,void 0,(function*(){this.TemplateList.VMlist$=Object(h.a)(yield this.templateService.getVMList(this.TemplateList.TemplateID)),this.refreshInterval=window.setInterval(()=>Object(o.a)(this,void 0,void 0,(function*(){this.TemplateList.VMlist$=Object(h.a)(yield this.templateService.getVMList(this.TemplateList.TemplateID))})),v.e)}))}ngOnDestroy(){window.clearInterval(this.refreshInterval)}ngOnInit(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.refreshList()}))}Cancel(){this.dialogOpened=!1}Save(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.refreshList()}))}Click(e,t,c,i){this.updateId=e,this.updateCPU=t,this.updateMem=c,this.updateDisk=i,this.dialogOpened=!0}onCancel(){this.close()}close(){this.cancel.emit()}delete(e){return Object(o.a)(this,void 0,void 0,(function*(){yield this.templateService.removeItemVM(e).then(()=>{this.vo.alertText="Successfully delete vendor with id "+e,this.vo.alertType="success"},e=>{this.vo.alertType="danger",this.vo.alertText=e}).then(()=>{this.resetAlert()}),this.refreshList()}))}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(I.f),r.Mb(f.e),r.Mb(u),r.Mb(y))},e.\u0275cmp=r.Gb({type:e,selectors:[["tide-vm-card"]],inputs:{opened:"opened",templateid:"templateid"},outputs:{save:"save",cancel:"cancel"},decls:11,vars:12,consts:[[3,"clrModalOpen","clrModalSize","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],[3,"opened","vmid","save","cancel",4,"ngIf"],[1,"key"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[3,"clrDgItem"],[1,"btn","btn-sm","btn-link",3,"click"],[1,"value"],[3,"opened","vmid","save","cancel"]],template:function(e,t){1&e&&(r.Sb(0,"clr-modal",0),r.ac("clrModalOpenChange",(function(e){return t.opened=e})),r.Sb(1,"h3",1),r.Bc(2," VM Template "),r.Rb(),r.Sb(3,"div",2),r.zc(4,$,18,1,"div",3),r.ec(5,"async"),r.Rb(),r.Sb(6,"div",4),r.Sb(7,"button",5),r.ac("click",(function(){return t.onCancel()})),r.Bc(8),r.ec(9,"translate"),r.Rb(),r.Rb(),r.Rb(),r.zc(10,q,1,2,"tide-template-dialogupdate",6)),2&e&&(r.jc("clrModalOpen",t.opened)("clrModalSize","lg")("clrModalClosable",!1),r.Ab(4),r.jc("ngIf",r.fc(5,6,t.TemplateList.VMlist$)),r.Ab(4),r.Dc(" ",r.gc(9,8,"HOME.RESOURCE.DIALOG.CANCEL",r.mc(11,F))," "),r.Ab(2),r.jc("ngIf",t.dialogOpened))},styles:[""]}),e})();function J(e,t){if(1&e&&(r.Sb(0,"clr-alert",18),r.Sb(1,"clr-alert-item"),r.Sb(2,"div",19),r.Sb(3,"span"),r.Bc(4),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&e){const e=r.dc();r.jc("clrAlertClosable",!1),r.Ab(4),r.Cc(e.vo.serverError)}}const K=function(){return{}};function X(e,t){1&e&&(r.Sb(0,"span"),r.Bc(1),r.ec(2,"translate"),r.Rb()),2&e&&(r.Ab(1),r.Dc(" ",r.gc(2,1,"HOME.RESOURCE.DIALOG.SAVE",r.mc(4,K))," "))}function Q(e,t){1&e&&(r.Sb(0,"span",20),r.Bc(1," Loading... "),r.Rb())}let W=(()=>{class e{constructor(e,t,c,i){this.fb=e,this.translate=t,this.templateService=c,this.vmCard=i,this.opened=!1,this.save=new r.n,this.cancel=new r.n,this.vo={serverError:"",spinning:!1},this.templateForm=this.fb.group({id:[],disk:[i.updateCPU,I.E.required],vmem:[i.updateMem,I.E.required],vcpu:[i.updateDisk,I.E.required],ports:[""]})}ngOnInit(){}onCancel(){this.close()}onSave(){return Object(o.a)(this,void 0,void 0,(function*(){const{value:e}=this.templateForm,t=this.changeID(e);this.resetModal(),this.vo.spinning=!0,yield this.templateService.editItemVM(t).then(()=>{this.save.emit(""),this.close(),this.vo.spinning=!1},e=>{this.vo.serverError=e,this.vo.spinning=!1})}))}close(){this.cancel.emit()}resetModal(){this.vo.serverError="",this.vo.spinning=!1}changeID(e){return{id:this.vmid,disk:e.disk,vmem:e.vmem,vcpu:e.vcpu,ports:e.ports}}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(I.f),r.Mb(f.e),r.Mb(u),r.Mb(H))},e.\u0275cmp=r.Gb({type:e,selectors:[["tide-template-dialogupdate"]],inputs:{opened:"opened",vmid:"vmid"},outputs:{save:"save",cancel:"cancel"},decls:29,vars:18,consts:[[3,"clrModalOpen","clrModalSize","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],["clrForm","",3,"formGroup"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","disk"],["id","disk","type","number","formControlName","disk","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],["for","vmem"],["id","vmem","type","number","formControlName","vmem","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],["for","vcpu"],["id","vcpu","type","number","formControlName","vcpu","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],["for","ports"],["id","ports","type","text","formControlName","ports","clrInput","",1,"clr-col-12","clr-col-md-8",3,"placeholder"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],["class","spinner spinner-sm",4,"ngIf"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],[1,"spinner","spinner-sm"]],template:function(e,t){1&e&&(r.Sb(0,"clr-modal",0),r.ac("clrModalOpenChange",(function(e){return t.opened=e})),r.Sb(1,"h3",1),r.Bc(2," Update VM Template "),r.Rb(),r.Sb(3,"div",2),r.Sb(4,"form",3),r.zc(5,J,5,2,"clr-alert",4),r.Sb(6,"clr-input-container"),r.Sb(7,"label",5),r.Bc(8,"Disk Space"),r.Rb(),r.Nb(9,"input",6),r.Rb(),r.Sb(10,"clr-input-container"),r.Sb(11,"label",7),r.Bc(12,"Memory Size"),r.Rb(),r.Nb(13,"input",8),r.Rb(),r.Sb(14,"clr-input-container"),r.Sb(15,"label",9),r.Bc(16,"vCPU Number"),r.Rb(),r.Nb(17,"input",10),r.Rb(),r.Sb(18,"clr-input-container"),r.Sb(19,"label",11),r.Bc(20,"Exposed Ports"),r.Rb(),r.Nb(21,"input",12),r.Rb(),r.Rb(),r.Rb(),r.Sb(22,"div",13),r.Sb(23,"button",14),r.ac("click",(function(){return t.onCancel()})),r.Bc(24),r.ec(25,"translate"),r.Rb(),r.Sb(26,"button",15),r.ac("click",(function(){return t.onSave()})),r.zc(27,X,3,5,"span",16),r.zc(28,Q,2,0,"span",17),r.Rb(),r.Rb(),r.Rb()),2&e&&(r.jc("clrModalOpen",t.opened)("clrModalSize","lg")("clrModalClosable",!1),r.Ab(4),r.jc("formGroup",t.templateForm),r.Ab(1),r.jc("ngIf",t.vo.serverError),r.Ab(4),r.jc("placeholder","Disk Space Size (GB)"),r.Ab(4),r.jc("placeholder","Memory Size (GB)"),r.Ab(4),r.jc("placeholder","vCPU Number"),r.Ab(4),r.jc("placeholder","Exposed Ports, use , to seperate ports without space"),r.Ab(2),r.jc("disabled",t.vo.spinning),r.Ab(1),r.Dc(" ",r.gc(25,14,"HOME.RESOURCE.DIALOG.CANCEL",r.mc(17,K))," "),r.Ab(2),r.jc("disabled",!t.templateForm.valid||t.vo.spinning),r.Ab(1),r.jc("ngIf",!t.vo.spinning),r.Ab(1),r.jc("ngIf",t.vo.spinning))},directives:[C.yb,C.zb,I.G,I.r,C.ib,I.k,j.v,C.sb,C.tb,I.w,I.c,I.q,I.i,C.rb,C.g,C.h,C.i],pipes:[f.d],styles:[""]}),e})();const Y=[{path:"",component:l,children:[{path:"",component:y}]}],Z=[u];let _=(()=>{class e{}return e.\u0275mod=r.Kb({type:e}),e.\u0275inj=r.Jb({factory:function(t){return new(t||e)},imports:[[n.f.forChild(Y)],n.f]}),e})();var ee=c("30Bq"),te=c("Bgc3"),ce=c("oBHS"),ie=c("gMiC");let ne=(()=>{class e{}return e.\u0275mod=r.Kb({type:e}),e.\u0275inj=r.Jb({factory:function(t){return new(t||e)},providers:[...Z],imports:[[i.a,_]]}),e})();r.uc(y,[j.s,j.t,j.u,j.v,j.C,j.y,j.z,j.A,j.B,j.w,j.x,n.g,n.c,n.e,n.d,n.h,I.G,I.v,I.F,I.c,I.w,I.z,I.a,I.C,I.D,I.y,I.q,I.r,I.B,I.o,I.n,I.x,I.b,I.d,I.t,I.u,I.s,I.h,I.k,I.i,I.l,I.e,C.g,C.h,C.j,C.k,C.i,C.v,C.w,C.x,C.z,C.A,C.B,C.J,C.H,C.K,C.L,C.P,C.Q,C.Tc,C.y,C.I,C.N,C.M,C.O,C.C,C.D,C.E,C.mb,C.G,C.F,C.Uc,C.Vc,C.Wc,C.Xc,C.Yc,C.Zc,C.ad,C.bd,C.cd,C.dd,C.Nc,C.Mc,C.Yb,C.Vb,C.Tb,C.Ub,C.Zb,C.Wb,C.Xb,C.sc,C.tc,C.Mb,C.uc,C.kb,C.yb,C.zb,C.hb,C.vb,C.lb,C.qb,C.pb,C.Sc,C.wb,C.l,C.m,C.tb,C.t,C.u,C.ob,C.ib,C.ub,C.s,C.r,C.o,C.p,C.q,C.X,C.U,C.V,C.W,C.Ab,C.Lc,C.Y,C.n,C.rb,C.sb,C.Cb,C.Db,C.Hb,C.Ib,C.Jb,C.Nb,C.Ob,C.ic,C.jc,C.Kb,C.Lb,C.R,C.T,C.S,C.xb,C.jb,C.Bb,C.Pc,C.Oc,C.ec,C.dc,C.hc,C.gc,C.fc,C.ed,C.fd,C.vc,C.zc,C.wc,C.xc,C.yc,C.cb,C.eb,C.fb,C.db,C.Pb,C.Qb,C.Rb,C.pc,C.rc,C.qc,C.Ac,C.Ec,C.Jc,C.Kc,C.Bc,C.Dc,C.Cc,C.Ic,C.Hc,C.Fc,C.Gc,C.ab,C.gb,C.nb,C.Z,C.bb,C.bc,C.ac,C.cc,C.id,C.jd,C.b,C.e,C.f,C.d,C.c,C.gd,C.hd,C.Sb,C.Gb,C.Eb,C.Qc,C.Rc,C.Fb,C.kc,C.lc,C.mc,C.nc,C.oc,ee.a,f.a,te.a,l,y,z,G,H,W],[j.b,j.J,j.r,j.m,j.G,j.g,j.E,j.H,j.d,j.f,j.k,j.l,j.n,f.d,ce.a,ie.a]),r.uc(H,[j.s,j.t,j.u,j.v,j.C,j.y,j.z,j.A,j.B,j.w,j.x,n.g,n.c,n.e,n.d,n.h,I.G,I.v,I.F,I.c,I.w,I.z,I.a,I.C,I.D,I.y,I.q,I.r,I.B,I.o,I.n,I.x,I.b,I.d,I.t,I.u,I.s,I.h,I.k,I.i,I.l,I.e,C.g,C.h,C.j,C.k,C.i,C.v,C.w,C.x,C.z,C.A,C.B,C.J,C.H,C.K,C.L,C.P,C.Q,C.Tc,C.y,C.I,C.N,C.M,C.O,C.C,C.D,C.E,C.mb,C.G,C.F,C.Uc,C.Vc,C.Wc,C.Xc,C.Yc,C.Zc,C.ad,C.bd,C.cd,C.dd,C.Nc,C.Mc,C.Yb,C.Vb,C.Tb,C.Ub,C.Zb,C.Wb,C.Xb,C.sc,C.tc,C.Mb,C.uc,C.kb,C.yb,C.zb,C.hb,C.vb,C.lb,C.qb,C.pb,C.Sc,C.wb,C.l,C.m,C.tb,C.t,C.u,C.ob,C.ib,C.ub,C.s,C.r,C.o,C.p,C.q,C.X,C.U,C.V,C.W,C.Ab,C.Lc,C.Y,C.n,C.rb,C.sb,C.Cb,C.Db,C.Hb,C.Ib,C.Jb,C.Nb,C.Ob,C.ic,C.jc,C.Kb,C.Lb,C.R,C.T,C.S,C.xb,C.jb,C.Bb,C.Pc,C.Oc,C.ec,C.dc,C.hc,C.gc,C.fc,C.ed,C.fd,C.vc,C.zc,C.wc,C.xc,C.yc,C.cb,C.eb,C.fb,C.db,C.Pb,C.Qb,C.Rb,C.pc,C.rc,C.qc,C.Ac,C.Ec,C.Jc,C.Kc,C.Bc,C.Dc,C.Cc,C.Ic,C.Hc,C.Fc,C.Gc,C.ab,C.gb,C.nb,C.Z,C.bb,C.bc,C.ac,C.cc,C.id,C.jd,C.b,C.e,C.f,C.d,C.c,C.gd,C.hd,C.Sb,C.Gb,C.Eb,C.Qc,C.Rc,C.Fb,C.kc,C.lc,C.mc,C.nc,C.oc,ee.a,f.a,te.a,l,y,z,G,H,W],[j.b,j.J,j.r,j.m,j.G,j.g,j.E,j.H,j.d,j.f,j.k,j.l,j.n,f.d,ce.a,ie.a])}}]);